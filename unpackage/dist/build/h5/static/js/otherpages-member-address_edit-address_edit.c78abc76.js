(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-member-address_edit-address_edit"],{2333:function(e,a,t){"use strict";t.r(a);var i=t("3b32"),s=t("f8ed");for(var d in s)"default"!==d&&function(e){t.d(a,e,(function(){return s[e]}))}(d);t("e2ab");var r,n=t("f0c5"),o=Object(n["a"])(s["default"],i["b"],i["c"],!1,null,"3a1b1331",null,!1,i["a"],r);a["default"]=o.exports},"3b32":function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return d})),t.d(a,"a",(function(){return i}));var i={pickRegions:t("5141").default,loadingCover:t("821c").default},s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"address-edit-content",attrs:{"data-theme":e.themeStyle}},[t("v-uni-view",{staticClass:"edit-wrap"},[t("v-uni-view",{staticClass:"tip"},[e._v("地址信息")]),t("v-uni-view",{staticClass:"edit-item"},[t("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("consignee"))),t("v-uni-text",[e._v("*")])],1),t("v-uni-input",{staticClass:"uni-input",attrs:{type:"text","placeholder-class":"placeholder-class",placeholder:e.$lang("consigneePlaceholder"),maxlength:"30",name:"name"},model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1),t("v-uni-view",{staticClass:"edit-item"},[t("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("mobile"))),t("v-uni-text",[e._v("*")])],1),t("v-uni-input",{staticClass:"uni-input",attrs:{type:"number","placeholder-class":"placeholder-class",placeholder:e.$lang("mobilePlaceholder"),maxlength:"11",value:""},model:{value:e.formData.mobile,callback:function(a){e.$set(e.formData,"mobile",a)},expression:"formData.mobile"}})],1),t("v-uni-view",{staticClass:"edit-item"},[t("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("telephone")))]),t("v-uni-input",{staticClass:"uni-input",attrs:{type:"text","placeholder-class":"placeholder-class",placeholder:e.$lang("telephonePlaceholder"),maxlength:"20",value:""},model:{value:e.formData.telephone,callback:function(a){e.$set(e.formData,"telephone",a)},expression:"formData.telephone"}})],1),t("v-uni-view",{staticClass:"edit-item"},[t("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("receivingCity"))),t("v-uni-text",[e._v("*")])],1),t("pick-regions",{on:{getRegion:function(a){arguments[0]=a=e.$handleEvent(a),e.handleGetRegion.apply(void 0,arguments)}}},[t("v-uni-text",[e._v(e._s(e.addressValue?e.addressValue:"请选择所在地区"))])],1)],1),t("v-uni-view",{staticClass:"edit-item"},[t("v-uni-text",{staticClass:"tit"},[e._v(e._s(e.$lang("address"))),t("v-uni-text",[e._v("*")])],1),t("v-uni-input",{staticClass:"uni-input",attrs:{type:"text","placeholder-class":"placeholder-class",placeholder:e.$lang("addressPlaceholder"),maxlength:"50"},model:{value:e.formData.address,callback:function(a){e.$set(e.formData,"address",a)},expression:"formData.address"}})],1)],1),t("v-uni-view",{staticClass:"btn"},[t("v-uni-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.saveAddress.apply(void 0,arguments)}}},[e._v(e._s(e.$lang("save")))])],1),t("loading-cover",{ref:"loadingCover"})],1)},d=[]},4076:function(e,a,t){var i=t("59fa");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=t("4f06").default;s("22d5f73f",i,!0,{sourceMap:!1,shadowMode:!1})},"59fa":function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */[data-v-3a1b1331] pick-regions,\r\n.pick-regions[data-v-3a1b1331]{flex:1}.edit-wrap[data-v-3a1b1331]{background:#fff;overflow:hidden}.edit-wrap .tip[data-v-3a1b1331]{padding:%?20?% %?30?% %?10?%;background-color:#f8f8f8;color:#909399}.edit-item[data-v-3a1b1331]{display:flex;align-items:center;margin:0 %?30?%;min-height:%?100?%;background-color:#fff}.edit-item .text_inp[data-v-3a1b1331]{margin-left:%?20?%;flex:1}.edit-item .tit[data-v-3a1b1331]{width:%?148?%}.edit-item .tit uni-text[data-v-3a1b1331]{margin-left:%?10?%;color:#ff4544}.edit-item .tit.margin_tit[data-v-3a1b1331]{align-self:flex-start;margin-top:%?24?%}.edit-item .iconlocation[data-v-3a1b1331]{color:#606266;align-self:flex-start;margin-top:%?20?%}.edit-item .select-address[data-v-3a1b1331]{display:block;margin-left:%?10?%}.edit-item .select-address.empty[data-v-3a1b1331]{color:grey}.edit-item uni-textarea[data-v-3a1b1331],\r\n.edit-item uni-input[data-v-3a1b1331]{flex:1;font-size:%?28?%;margin-left:%?20?%;padding:0}.edit-item uni-textarea[data-v-3a1b1331]{margin-top:%?6?%;height:%?100?%;padding-bottom:%?20?%;padding-top:%?20?%;line-height:%?50?%}.edit-wrap > .edit-item + .edit-item[data-v-3a1b1331]{border-top:%?2?% solid #ebedf0}.add[data-v-3a1b1331]{margin-top:%?60?%;height:%?80?%;line-height:%?80?%!important;border-radius:%?80?%;font-weight:500;width:calc(100% - %?60?%);margin-left:%?30?%}.btn[data-v-3a1b1331]{position:fixed;width:100%;bottom:%?30?%;height:auto;padding-bottom:constant(safe-area-inset-bottom);\r\n  /*兼容 IOS<11.2*/padding-bottom:env(safe-area-inset-bottom)\r\n  /*兼容 IOS>11.2*/}',""]),e.exports=a},cafa:function(e,a,t){"use strict";var i=t("4ea4");t("c975"),t("26e9"),t("ac1f"),t("841c"),t("1276"),t("498a"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=i(t("5141")),d=i(t("ecd4")),r=i(t("2613")),n=i(t("a8e2")),o={components:{pickRegions:s.default},data:function(){return{formData:{id:0,name:"",mobile:"",telephone:"",province_id:"",city_id:"",district_id:"",community_id:"",address:"",full_address:"",latitude:0,longitude:0,is_default:1},address:"",addressValue:"",back:"/otherpages/member/address/address",redirect:"redirectTo",flag:!1,defaultRegions:[],localType:2}},onLoad:function(e){if(e.back&&(this.back=e.back),e.redirect&&(this.redirect=e.redirect),e.type&&(this.localType=e.type),e.id&&!e.name)this.formData.id=e.id,this.getAddressDetail();else if(e.name){uni.getStorageSync("addressInfo")&&(this.formData=uni.getStorageSync("addressInfo")),this.formData.address=e.name,this.getAddress(e.latng);var a=this.getQueryVariable("latng").split(",");this.formData.latitude=a[0],this.formData.longitude=a[1]}},onBackPress:function(){uni.setStorageSync("addressInfo","")},onShow:function(){this.$langConfig.refresh(),this.formData.id?uni.setNavigationBarTitle({title:"编辑收货地址"}):uni.setNavigationBarTitle({title:"新增收货地址"})},onReady:function(){this.$refs.loadingCover.hide()},onHide:function(){this.flag=!1},mixins:[r.default],methods:{getAddressDetail:function(){var e=this;this.$api.sendRequest({url:"/api/memberaddress/info",data:{id:this.formData.id},success:function(a){var t=a.data;null!=t&&(e.formData.name=t.name,e.formData.mobile=t.mobile,e.formData.telephone=t.telephone,e.formData.address=t.address,e.formData.full_address=t.full_address,e.formData.latitude=t.latitude,e.formData.longitude=t.longitude,e.formData.is_default=t.is_default,e.addressValue="",e.addressValue+=void 0!=a.data.province_id?a.data.province_id:"",e.addressValue+=void 0!=a.data.city_id?"-"+a.data.city_id:"",e.addressValue+=void 0!=a.data.district_id?"-"+a.data.district_id:"",e.localType=t.type,e.defaultRegions=[t.province_id,t.city_id,t.district_id]),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(a){e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},getAddress:function(e){var a=this;this.$api.sendRequest({url:"/api/memberaddress/tranAddressInfo",data:{latlng:e},success:function(e){0==e.code?(a.formData.full_address="",a.formData.full_address+=void 0!=e.data.province?e.data.province:"",a.formData.full_address+=void 0!=e.data.city?"-"+e.data.city:"",a.formData.full_address+=void 0!=e.data.district?"-"+e.data.district:"",a.addressValue="",a.addressValue+=void 0!=e.data.province_id?e.data.province_id:"",a.addressValue+=void 0!=e.data.city_id?"-"+e.data.city_id:"",a.addressValue+=void 0!=e.data.district_id?"-"+e.data.district_id:"",console.log(a.addressValue)):a.showToast({title:"数据有误"})}})},handleGetRegion:function(e){console.log(e),this.formData.full_address="",this.formData.full_address+=void 0!=e[0]?e[0].name:"",this.formData.full_address+=void 0!=e[1]?"-"+e[1].name:"",this.formData.full_address+=void 0!=e[2]?"-"+e[2].name:"",this.addressValue="",this.addressValue+=void 0!=e[0]?e[0].name:"",this.addressValue+=void 0!=e[1]?"-"+e[1].name:"",this.addressValue+=void 0!=e[2]?"-"+e[2].name:""},selectAddress:function(){var e=this.formData;uni.setStorageSync("addressInfo",e);var a=n.default.h5Domain+"/otherpages/member/address_edit/address_edit?type="+this.localType;this.formData.id&&(a+="&id="+this.formData.id),this.back&&(a+="&back="+this.back),window.location.href="https://apis.map.qq.com/tools/locpicker?search=1&type=0&backurl="+encodeURIComponent(a)+"&key="+n.default.mpKey+"&referer=myapp"},getQueryVariable:function(e){for(var a=window.location.search.substring(1),t=a.split("&"),i=0;i<t.length;i++){var s=t[i].split("=");if(s[0]==e)return s[1]}return!1},vertify:function(){this.formData.name=this.formData.name.trim(),this.formData.mobile=this.formData.mobile.trim(),this.formData.address=this.formData.address.trim();var e=[{name:"name",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"full_address",checkType:"required",errorMsg:"请选择省市区县"},{name:"address",checkType:"required",errorMsg:"详细地址不能为空"}],a=d.default.check(this.formData,e);return!!a||(this.$util.showToast({title:d.default.error}),this.flag=!1,!1)},saveAddress:function(){var e=this;if(!this.flag&&(this.flag=!0,this.vertify())){var a=this.addressValue.split("-"),t={},i="";t={name:this.formData.name,mobile:this.formData.mobile,telephone:this.formData.telephone,province_id:a[0],city_id:a[1],district_id:a[2],community_id:0,address:this.formData.address,full_address:this.formData.full_address,latitude:this.formData.latitude,longitude:this.formData.longitude,is_default:this.formData.is_default,type:this.localType},i="add",this.formData.id&&(i="edit",t.id=this.formData.id),this.$api.sendRequest({url:"/api/memberaddress/"+i,data:t,success:function(a){if(e.flag=!1,0==a.code){if(""!=e.back&&"edit"!=i){for(var t=!0,s=getCurrentPages().reverse(),d=0;d<s.length;d++)if(-1!=e.back.indexOf(s[d].route)){t=!1,uni.navigateBack({delta:d});break}t&&e.$util.redirectTo(e.back,{},"redirectTo")}else e.$util.showToast({title:a.message}),e.$util.redirectTo(e.back,{},"redirectTo");uni.removeStorageSync("addressInfo")}},fail:function(a){e.flag=!1}})}}}};a.default=o},e2ab:function(e,a,t){"use strict";var i=t("4076"),s=t.n(i);s.a},f8ed:function(e,a,t){"use strict";t.r(a);var i=t("cafa"),s=t.n(i);for(var d in i)"default"!==d&&function(e){t.d(a,e,(function(){return i[e]}))}(d);a["default"]=s.a}}]);