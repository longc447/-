(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index-index"],{"0ae7":function(t,e,a){"use strict";var i=a("6e95"),o=a.n(i);o.a},"0e67":function(t,e,a){"use strict";var i=a("2c6b"),o=a.n(i);o.a},"126b":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n */.popup-bg[data-v-a8d0051a]{display:flex;align-items:center;justify-content:center;position:fixed;z-index:-9999;opacity:0;top:0;left:0;right:0;bottom:0;width:%?750?%;background-color:rgba(0,0,0,.6);transition:opacity .3s}.popup-show[data-v-a8d0051a]{z-index:99;opacity:1}.update-wrap[data-v-a8d0051a]{width:%?580?%;border-radius:%?10?%;position:relative;display:flex;flex-direction:column;overflow:hidden}.update-wrap .updata-bg-img[data-v-a8d0051a]{position:absolute;top:0;left:0;width:%?580?%;height:%?440?%;background:url(http://caihuo2020.oss-cn-beijing.aliyuncs.com/app/update-img.png) no-repeat;background-size:100% 100%;z-index:1}.update-wrap .updata-bg-color[data-v-a8d0051a]{position:absolute;width:%?580?%;top:10vw;height:calc(100% - 10vw);background-color:#fff;z-index:0}.update-wrap .update-content[data-v-a8d0051a]{position:relative;z-index:2;display:flex;flex-direction:column}.update-wrap .update-con-top[data-v-a8d0051a]{padding:%?70?% %?50?%}.update-wrap .update-btn[data-v-a8d0051a]{height:%?80?%;display:flex;align-items:center;border-top:1px solid #e7e7e7;margin-top:%?20?%}.update-wrap .update-btn .btn-item[data-v-a8d0051a]{display:flex;align-items:center;justify-content:center;flex:1}.update-wrap .update-btn .btn-item .item-text[data-v-a8d0051a]{text-align:center;font-size:%?28?%;color:#666}.update-wrap .update-btn .btn-item .text-bule[data-v-a8d0051a]{color:#045fcf}.update-wrap .update-btn .btn-item[data-v-a8d0051a]:first-child{border-right:1px solid #e7e7e7}.update-wrap .update-top-title[data-v-a8d0051a]{color:#fff;font-size:%?34?%;font-weight:700}.update-wrap .update-top-version[data-v-a8d0051a]{color:#fff;font-size:%?28?%;margin-top:%?10?%}.update-wrap .uodate-content[data-v-a8d0051a]{color:#333;font-size:%?30?%;padding:0 %?50?%;margin-top:%?120?%}.update-wrap .current-version[data-v-a8d0051a]{text-align:center;margin-top:%?20?%;font-size:%?24?%;color:#666;margin-bottom:%?16?%}.sche-wrap[data-v-a8d0051a]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:%?160?% %?50?% %?40?%}.sche-wrap .sche-wrap-text[data-v-a8d0051a]{font-size:%?24?%;color:#666;margin-bottom:%?20?%}.sche-wrap .sche-bg[data-v-a8d0051a]{position:relative;background-color:#ccc;height:%?20?%;border-radius:100px;width:%?480?%;display:flex;align-items:center;margin-bottom:%?30?%}.sche-wrap .sche-bg-jindu[data-v-a8d0051a]{position:absolute;left:0;top:0;height:%?20?%;background-color:#5775e7;border-radius:100px}.sche-wrap .sche-bg-jindu .sche-bg-round[data-v-a8d0051a]{position:absolute;left:100%;height:%?24?%;width:%?24?%;background-color:#fff;border-color:#fff;border-style:solid;border-width:%?10?%;border-radius:100px;-webkit-transform:translateX(%?-20?%) translateY(%?-10?%);transform:translateX(%?-20?%) translateY(%?-10?%);box-shadow:0 0 4px #eaeaea}.sche-wrap .sche-bg-jindu .sche-bg-round .sche-bg-round-text[data-v-a8d0051a]{position:relative;top:%?24?%;font-size:%?24?%;text-align:center;color:#5775e7}',""]),t.exports=e},"16c7":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={diyIndexPage:a("0101").default,diyGroup:a("1e36").default,nsCopyright:a("4953").default,uniPopup:a("fa04").default,diyBottomNav:a("8c8e").default,loadingCover:a("a197").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page_img",style:{backgroundColor:t.bgColor,backgroundImage:t.bgImg,minHeight:"calc(100vh - 55px)"},attrs:{"data-theme":t.themeStyle}},[t.topIndexValue?a("diy-index-page",{ref:"indexPage",attrs:{value:t.topIndexValue,minHeight:t.minHeight,scrollHeight:t.scrollHeight,scrollTopHeight:t.scrollTopHeight,bgUrl:t.bgUrl}},[t.diyData.value?a("diy-group",{attrs:{diyData:t.diyData,siteId:t.siteId,height:t.scrollTopHeight}}):t._e(),a("v-uni-view",{staticClass:"padding-bottom"},[a("ns-copyright")],1)],1):a("v-uni-scroll-view",{style:{height:"calc(100vh - headerHeight - 55px)"},attrs:{"scroll-y":"true","show-scrollbar":"false"}},[a("v-uni-view",{staticClass:"bg-index",style:t.backgroundUrl},[t.diyData.value?a("diy-group",{attrs:{diyData:t.diyData,siteId:t.siteId,city:t.city}}):t._e(),a("v-uni-view",{staticClass:"padding-bottom"},[a("ns-copyright")],1)],1)],1),[a("v-uni-view",{on:{touchmove:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("uni-popup",{ref:"uniPopupWindow",staticClass:"wap-floating",attrs:{type:"center",maskClick:!1}},[t.diyData.global&&t.diyData.global.popWindow?a("v-uni-view",{staticClass:"image-wrap"},[a("v-uni-image",{style:{height:480*t.diyData.global.popWindow.imgHeight/t.diyData.global.popWindow.imgWidth+"rpx"},attrs:{src:t.$util.img(t.diyData.global.popWindow.imageUrl)},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.redirectTo(t.diyData.global.popWindow.link)}}})],1):t._e(),a("v-uni-text",{staticClass:"iconfont iconroundclose",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopupWindow.apply(void 0,arguments)}}})],1)],1)],a("v-uni-view",{staticClass:"PopWindow",on:{touchmove:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("uni-popup",{ref:"uniPopupClose",staticClass:"wap-floating",attrs:{type:"center",maskClick:!1}},[a("v-uni-view",{staticClass:"popup-box"},[a("v-uni-view",{staticClass:"close_title margin-top"},[t._v("站点关闭")]),a("v-uni-view",{staticClass:"close_content"},[t.webSiteInfo&&t.webSiteInfo.close_reason?a("v-uni-scroll-view",{staticClass:"close_content_box",attrs:{"scroll-y":"true"}},[t._v(t._s(t.webSiteInfo.close_reason))]):t._e()],1)],1)],1)],1),a("v-uni-view",{staticClass:"tabBar-fill"}),t.openBottomNav?a("v-uni-view",{staticClass:"page-bottom"},[a("diy-bottom-nav",{on:{callback:function(e){arguments[0]=e=t.$handleEvent(e),t.callback.apply(void 0,arguments)}}})],1):t._e(),a("uni-popup",{ref:"collectPopupWindow",staticClass:"wap-floating wap-floating-collect",attrs:{type:"top"}},[t.showTip?a("v-uni-view",{staticClass:"collectPopupWindow",style:{marginTop:t.collectTop+t.statusBarHeight+"px"}},[a("v-uni-image",{attrs:{src:t.$util.img("/upload/uniapp/collect2.png"),mode:"aspectFit"}}),a("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeCollectPopupWindow.apply(void 0,arguments)}}},[t._v("我知道了")])],1):t._e()],1),a("loading-cover",{ref:"loadingCover"})],2)},n=[]},"2c6b":function(t,e,a){var i=a("126b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("5c6fbb83",i,!0,{sourceMap:!1,shadowMode:!1})},"3d04":function(t,e,a){"use strict";a.r(e);var i=a("16c7"),o=a("eef3");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("0ae7"),a("5bc39");var r,s=a("f0c5"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"528c0d2d",null,!1,i["a"],r);e["default"]=d.exports},4209:function(t,e,a){var i=a("7b1e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("7b16ae74",i,!0,{sourceMap:!1,shadowMode:!1})},"48f9":function(t,e,a){"use strict";var i;a("c975"),a("e25e"),a("ac1f"),a("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"appUpdate",props:{force:{type:Boolean,default:!0},tabbar:{type:Boolean,default:!1}},data:function(){return{popup_show:!1,platform:"",version:"1.0.0",need_update:!1,downing:!1,downstatus:0,update_info:{os:"",version:"",note:""},schedule:0,downloadedSize:0,viewObj:null}},created:function(){i=this},computed:{lengthWidth:function(){return{width:480*i.schedule/100+"rpx"}},getHeight:function(){var t=0;return i.tabbar&&(t=50),{bottom:t+"px"}}},methods:{update:function(){console.log("父组件触发方法")},getUpdateInfo:function(){uni.request({url:"https://cpdd.website/update",method:"get",success:function(t){console.log(t,"跟新配置"),console.log(t.data.data);for(var e=t.data.data,a=0;a<e.length;a++)if(i.platform==e[a]["os"]){i.update_info=e[a];break}i.update_info.os&&(console.log("后台返回的当前系统的升级参数",i.update_info),i.checkUpdate())}})},checkUpdate:function(){i.need_update=i.compareVersion(i.version,i.update_info.version),console.log("正在检查是否更新",i.version,i.update_info.version),i.need_update?(console.log("true"),i.popup_show=!0,i.tabbar&&(i.viewObj=new plus.nativeObj.View("viewObj",{bottom:"0px",left:"0px",height:"50px",width:"100%",backgroundColor:"rgba(0,0,0,.6)"}),i.viewObj.show())):console.log("false")},closeUpdate:function(){i.force?"Android"==plus.os.name?plus.runtime.quit():plus.ios.import("UIApplication").sharedApplication().performSelector("exit"):(i.popup_show=!1,i.viewObj.hide())},nowUpdate:function(){if(i.downing)return!1;i.downing=!0,/\.apk$/.test(i.update_info.download_url)||/\.wgt$/.test(i.update_info.download_url)?i.download_wgt():plus.runtime.openURL(i.update_info.download_url,(function(){plus.nativeUI.toast("打开错误")}))},download_wgt:function(){plus.nativeUI.showWaiting("下载更新文件...");var t={method:"get"},e=plus.downloader.createDownload(i.update_info.download_url,t,(function(t,e){}));e.addEventListener("statechanged",(function(t,e){if(null===e);else if(200==e)switch(i.downstatus=t.state,t.state){case 3:i.downloadedSize=t.downloadedSize;var a=0;t.totalSize&&(a=t.totalSize),i.schedule=parseInt(100*t.downloadedSize/a);break;case 4:i.installWgt(t.filename);break}else plus.nativeUI.closeWaiting(),plus.nativeUI.toast("下载出错"),i.downing=!1,i.downstatus=0})),e.start()},installWgt:function(t){plus.nativeUI.showWaiting("安装更新文件..."),plus.runtime.install(t,{},(function(){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("应用资源下载完成！",(function(){plus.runtime.restart()}))}),(function(t){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("安装更新文件失败["+t.code+"]："+t.message)}))},compareVersion:function(t,e){if(!t||!e||""==t||""==e)return!1;for(var a=t.split(".",4),i=e.split(".",4),o=0;o<a.length&&o<i.length;o++){var n=a[o],r=parseInt(n),s=i[o],d=parseInt(s);if(d>r||s.length>n.length)return!0;if(d<r)return!1}return i.length>a.length&&0==e.indexOf(t)}}};e.default=o},"5bc39":function(t,e,a){"use strict";var i=a("4209"),o=a.n(i);o.a},"6e95":function(t,e,a){var i=a("b25b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("50ed70ae",i,!0,{sourceMap:!1,shadowMode:!1})},"7b1e":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".wap-floating[data-v-528c0d2d] .uni-popup__wrapper.uni-custom .uni-popup__wrapper-box{background:none!important}\r\n\r\n/* .noStore-bg /deep/ .search-box {\r\n\tbackground: #ffffff;\r\n}\r\n\r\n.noStore-bg /deep/ .single-graph {\r\n\tbackground: #ffffff;\r\n} */[data-v-528c0d2d] .placeholder{height:0}",""]),t.exports=e},a362:function(t,e,a){"use strict";a.r(e);var i=a("b1fd"),o=a("d9c2");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("0e67");var r,s=a("f0c5"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"a8d0051a",null,!1,i["a"],r);e["default"]=d.exports},b1fd:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticClass:"popup-bg",class:{"popup-show":t.popup_show},style:t.getHeight},[a("v-uni-view",{staticClass:"update-wrap"},[a("v-uni-view",{staticClass:"update-content"},[a("v-uni-view",{staticClass:"update-con-top"},[a("v-uni-text",{staticClass:"update-top-title"},[t._v("发现新版本")]),a("v-uni-text",{staticClass:"update-top-version"},[t._v("V"+t._s(t.update_info.version))])],1),t.downstatus<1?a("v-uni-text",{staticClass:"uodate-content"},[t._v("更新内容:"+t._s(t.update_info.note))]):t._e(),t.downstatus<1?a("v-uni-text",{staticClass:"current-version"},[t._v("当前版本:V"+t._s(t.version))]):t._e(),t.downstatus<1?a("v-uni-view",{staticClass:"update-btn"},[a("v-uni-view",{staticClass:"btn-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeUpdate.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"item-text "},[t._v("残忍拒绝")])],1),a("v-uni-view",{staticClass:"btn-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.nowUpdate.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"item-text text-bule"},[t._v("立即升级")])],1)],1):a("v-uni-view",{staticClass:"sche-wrap"},[a("v-uni-text",{staticClass:"sche-wrap-text"},[t._v("更新包下载中...")]),a("v-uni-view",{staticClass:"sche-bg"},[a("v-uni-view",{staticClass:"sche-bg-jindu",style:t.lengthWidth},[a("v-uni-view",{staticClass:"sche-bg-round"},[t.schedule?a("v-uni-text",{staticClass:"sche-bg-round-text"},[t._v(t._s(t.schedule)+"%")]):a("v-uni-text",{staticClass:"sche-bg-round-text"},[t._v(t._s((t.downloadedSize/1024/1024).toFixed(2))+"M")])],1)],1)],1)],1)],1),a("v-uni-view",{staticClass:"updata-bg-img"}),a("v-uni-view",{staticClass:"updata-bg-color"})],1)],1)],1)},n=[]},b25b:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n */.collectPopupWindow[data-v-528c0d2d]{position:relative;height:%?113?%;width:%?510?%;margin-left:calc(100% - %?530?%)}.collectPopupWindow uni-image[data-v-528c0d2d]{width:100%;height:100%}.collectPopupWindow uni-text[data-v-528c0d2d]{color:#ff4544!important;font-size:%?24?%!important;position:absolute;top:%?48?%;right:%?25?%}.zhezhao[data-v-528c0d2d]{width:100vw;height:100vh;background-color:initial}uni-image[data-v-528c0d2d]{max-width:100%!important;max-height:100%!important}.diy-wrap[data-v-528c0d2d]{height:calc(100vh - 44px)}.page_img[data-v-528c0d2d]{background-size:contain!important;background-repeat:no-repeat!important}.bg-index[data-v-528c0d2d]{width:100%;height:100%;padding:0 %?30?%;box-sizing:border-box}.wap-floating .image-wrap[data-v-528c0d2d]{width:%?480?%}.wap-floating .image-wrap uni-image[data-v-528c0d2d]{width:100%;border-radius:%?40?%}.wap-floating uni-text[data-v-528c0d2d]{display:block;font-size:%?60?%;color:#fff;text-align:center}.wap-floating-collect .uni-popup__mask[data-v-528c0d2d]{background:transparent}[data-v-528c0d2d]::-webkit-scrollbar{width:0;height:0;color:transparent}.popup-box[data-v-528c0d2d]{width:%?450?%;background:#fff;border-radius:%?10?%;overflow:hidden}.popup-box .close_title[data-v-528c0d2d]{width:100%;text-align:center;height:%?70?%;line-height:%?70?%;font-size:%?28?%}.popup-box .close_content[data-v-528c0d2d]{width:100%;max-height:%?500?%;padding:%?20?%;box-sizing:border-box}.popup-box .close_content_box[data-v-528c0d2d]{width:100%;max-height:%?460?%;line-height:1.3}.noStore-text[data-v-528c0d2d]{color:#000!important}.isStore-top[data-v-528c0d2d]{margin-bottom:%?10?%}.tabBar-fill[data-v-528c0d2d]{height:calc(constant(safe-area-inset-bottom) + 56px);height:calc(env(safe-area-inset-bottom) + 56px)}.keep-on-record[data-v-528c0d2d]{text-align:center;padding-bottom:%?20?%}.keep-on-record uni-image[data-v-528c0d2d]{width:%?150?%;height:%?60?%}[data-v-528c0d2d] ::-webkit-scrollbar{width:0;height:0;background-color:initial;display:none}',""]),t.exports=e},c222:function(t,e,a){"use strict";var i=a("4ea4");a("4160"),a("c975"),a("e25e"),a("ac1f"),a("5319"),a("1276"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var o=i(a("1da1")),n=i(a("a362")),r=i(a("fa04")),s=i(a("8c8e")),d=(i(a("23a6")),i(a("0101"))),l=i(a("1e36")),c=i(a("c14b")),u=a("2442"),p=i(a("a5a8")),g=i(a("4953")),f=i(a("2009")),h=uni.getSystemInfoSync(),v={components:{uniPopup:r.default,diyBottomNav:s.default,nsNavbar:c.default,diyIndexPage:d.default,diyGroup:l.default,nsCopyRight:g.default,appUpdate:n.default},data:function(){return{diyData:{global:{title:"",popWindow:{imageUrl:"",count:-1,link:{}}}},navTitle:"",webSiteInfo:null,memberId:0,id:0,city:"",siteId:0,isIphoneX:!1,pageHeight:"0",headerHeight:"0",bottomHeight:"0",topIndexValue:null,statusBarHeight:h.statusBarHeight,collectTop:44,showTip:!1,mpCollect:!1,is_wholesaler:f.default.is_wholesaler}},mixins:[p.default],computed:{top:function(){var t=0;return t=this.isIphoneX?180:140,t=90,t},bgColor:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.bgColor),t},bgImg:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.topNavbg?"url("+this.$util.img(this.diyData.global.bgUrl)+")":this.diyData.global.bgColor),t},bgUrl:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.topNavbg?"transparent":this.diyData.global.bgUrl),t},bgNav:function(){return this.diyData.global.topNavColor?{background:this.diyData.global.topNavColor}:{background:"#ffffff"}},backgroundUrl:function(){var t=this.bgUrl?"background:url("+this.$util.img(this.bgUrl)+") no-repeat 0 0/100%":"";return t},scrollHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc("+this.pageHeight+"px - "+this.headerHeight+" - "+this.bottomHeight+")":"100vh"},scrollTopHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc("+this.pageHeight+"px - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"},textNavColor:function(){return this.diyData.global.textNavColor?this.diyData.global.textNavColor:"#ffffff"},openBottomNav:function(){var t=!1;return this.diyData&&this.diyData.global&&(t=this.diyData.global.openBottomNav),t},minHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc(100vh - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"},globalS:function(){return this.diyData.global}},onPullDownRefresh:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getDiyInfo();case 2:case"end":return e.stop()}}),e)})))()},onLoad:function(t){if(uni.hideTabBar(),this.siteId=parseInt(t.site_id)||0,this.isIphoneX=this.$util.uniappIsIPhoneX(),t.web_city&&uni.setStorageSync("city",{id:t.web_city,title:decodeURI(t.title)}),this.siteId&&uni.removeStorageSync("city"),t.source_member&&uni.setStorageSync("source_member",t.source_member),t.scene){var e=decodeURIComponent(t.scene);e=e.split("&"),e.length&&e.forEach((function(t){-1!=t.indexOf("source_member")&&uni.setStorageSync("source_member",t.split("-")[1])}))}},onHide:function(){this.$store.commit("setDiySeckillInterval",null)},onShow:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){var a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(f.default.isMustLogin,"是否强制登陆"),1===f.default.isMustLogin&&(console.log("开始登陆"),a=uni.getStorageSync("token"),i=uni.getStorageSync("loginLock"),o=uni.getStorageSync("unbound"),console.log(a,i,o,"登陆状态",!a&&!i&&!o),a||uni.navigateTo({url:"/pages/login/login/login"})),e.next=4,t.refresh();case 4:t.getHeight(),t.$store.commit("setDiySeckillInterval",1),1===f.default.isPfs&&t.$api.sendRequest({url:"/api/member/detail",async:!1}).then((function(t){if(0!=t.code&&console.log("没有启用强制登陆code不会等于0"),0==t.code){console.log(t,"是否是批发商");var e=t.is_wholesaler;3!=e&&uni.navigateTo({url:"/pages/login/register/wholesale/wholesale"})}}));case 7:case"end":return e.stop()}}),e)})))()},mounted:function(){console.log("更新")},onPageScroll:function(t){this.$refs.topNav&&(t.scrollTop>=20?this.$refs.topNav.navTopBg():this.$refs.topNav.unSetnavTopBg())},methods:{getWholesale:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.sendRequest({url:"/api/member/detail",async:!1});case 2:a=e.sent,0==a.code&&console.log(a,"是否是批发商");case 4:case"end":return e.stop()}}),e)})))()},callback:function(){this.$refs.indexPage&&this.$refs.indexPage.initPageIndex()},refresh:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$langConfig.refresh(),uni.getStorageSync("token")&&(t.getMemberId(),t.getWholesale()),t.$store.dispatch("defaultImg"),t.$store.dispatch("getThemeStyle"),t.getWebSitefo(),uni.getStorageSync("city")?t.city=uni.getStorageSync("city").title:(uni.setStorageSync("city",{id:0,title:"全国"}),t.city="全国"),e.next=8,t.getDiyInfo();case 8:case"end":return e.stop()}}),e)})))()},getHeight:function(){var t=this;uni.getSystemInfo({success:function(e){t.pageHeight=e.screenHeight}}),this.$nextTick((function(){var e=uni.createSelectorQuery().in(t);e.select(".page-bottom").boundingClientRect((function(e){t.bottomHeight="55px"})).exec()}))},getDiyInfo:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a="DIY_VIEW_INDEX",i=uni.getStorageSync("city"),i.id&&(a="DIY_VIEW_CITY_INDEX"),t.$api.sendRequest({url:"/api/diyview/info",data:{name:a,site_id:t.siteId},async:!0,success:function(e){if(0!=e.code||!e.data)return t.$refs.loadingCover&&t.$refs.loadingCover.hide(),void(t.diyData={});var a=e.data;if(a.value=a.value.replace(/\@/g,"'"),a.value){t.diyData=JSON.parse(a.value),t.$langConfig.title(t.diyData.global.title),t.navTitle=t.diyData.global.title,t.mpCollect=t.diyData.global.mpCollect,t.diyData.global.popWindow&&t.diyData.global.popWindow.imageUrl&&setTimeout((function(){if(1==t.diyData.global.popWindow.count){var e=uni.getStorageSync("index_popwindow_count");(t.$refs.uniPopupWindow&&""==e||t.$refs.uniPopupWindow&&1==e)&&(t.$refs.uniPopupWindow.open(),uni.setStorageSync("index_popwindow_count",1))}else 0==t.diyData.global.popWindow.count&&(t.$refs.uniPopupWindow.open(),uni.setStorageSync("index_popwindow_count",0))}),500);for(var i=0;i<t.diyData.value.length;i++)"TopCategory"==t.diyData.value[i].controller&&(t.topIndexValue=t.diyData.value[i])}uni.stopPullDownRefresh(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(e){uni.stopPullDownRefresh(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}});case 4:case"end":return e.stop()}}),e)})))()},closePopupWindow:function(){this.$refs.uniPopupWindow.close(),uni.setStorageSync("index_popwindow_count",-1)},closeCollectPopupWindow:function(){this.$refs.collectPopupWindow.close(),uni.setStorageSync("isCollect",!0)},redirectTo:function(t){this.$util.diyRedirectTo(t)},getMemberId:function(){var t=this;this.$api.sendRequest({url:"/api/member/id",success:function(e){e.code>=0&&(t.memberId=e.data)}})},getWebSitefo:function(){var t=this;this.webSiteInfo=uni.getStorageSync("web_site_info"),this.webSiteInfo&&(this.webSiteInfo=JSON.parse(this.webSiteInfo)),this.$api.sendRequest({url:"/api/website/info",success:function(e){var a=e.data;if(a){if(t.webSiteInfo=a,t.webSiteInfo.wap_status)return;t.$refs.uniPopupClose.open(),uni.setStorageSync("web_site_info",JSON.stringify(t.webSiteInfo))}}})}},onShareAppMessage:function(t){var e="";this.webSiteInfo&&(e=this.webSiteInfo.title);var a="/pages/index/index/index",i=uni.getStorageSync("city");return i.id&&(a+="?name=DIY_VIEW_CITY_INDEX&web_city="+i.id+"&title="+encodeURI(i.title)),i.id&&this.memberId?a+="&source_member="+this.memberId:this.memberId&&(a+="?source_member="+this.memberId),{title:e,path:a,success:function(t){},fail:function(t){}}},onReady:function(){var t=this;this.$util.isWeiXin()&&this.$api.sendRequest({url:"/wechat/api/wechat/share",data:{url:window.location.href},success:function(e){if(0==e.code){var a=new u.Weixin;a.init(e.data.jssdk_config);var i=e.data.share_config,o=t.$config.h5Domain+"/pages/index/index/index",n=uni.getStorageSync("city");n.id&&(path+="?name=DIY_VIEW_CITY_INDEX&web_city="+n.id+"&title="+encodeURI(n.title)),n.id&&t.memberId?path+="&source_member="+t.memberId:t.memberId&&(path+="?source_member="+t.memberId),a.setShareData({title:i.shop_param_1+i.site_name,desc:i.shop_param_2+"\r\n"+i.shop_param_3+"\r\n收藏热度：★★★★★",link:o,imgUrl:t.$util.img(i.site_logo)})}}})}};e.default=v},d9c2:function(t,e,a){"use strict";a.r(e);var i=a("48f9"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},eef3:function(t,e,a){"use strict";a.r(e);var i=a("c222"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a}}]);