(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-info-info"],{"0be2":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var i={loadingCover:a("821c").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{attrs:{"data-theme":e.themeStyle}},["all"==e.indent?a("v-uni-view",{staticClass:"info-wrap"},[a("v-uni-view",{staticClass:"info-list-cell info-item info-list-con",attrs:{"hover-class":"cell-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.headImage.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("headImg")))]),a("v-uni-view",{staticClass:"info-list-head cell-tip"},[a("v-uni-image",{attrs:{src:e.memberInfo.headimg?e.$util.img(e.memberInfo.headimg):e.$util.getDefaultImage().default_headimg,mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.memberInfo.headimg=e.$util.getDefaultImage().default_headimg}}})],1),a("v-uni-text",{staticClass:"cell-more"})],1),a("v-uni-view",{staticClass:"info-list-cell info-list-con",attrs:{"hover-class":"cell-hover"}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("account")))]),a("v-uni-text",{staticClass:"cell-tip cell-tip1"},[e._v(e._s(e.memberInfoformData.number))])],1),a("v-uni-view",{staticClass:"info-list-cell info-list-con",attrs:{"hover-class":"cell-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyInfo("name")}}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("nickname")))]),a("v-uni-text",{staticClass:"cell-tip"},[e._v(e._s(e.memberInfoformData.nickName))]),a("v-uni-text",{staticClass:"cell-more"})],1),a("v-uni-view",{staticClass:"info-list-cell info-list-con",attrs:{"hover-class":"cell-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyInfo("realName")}}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("realName")))]),a("v-uni-text",{staticClass:"cell-tip"},[e._v(e._s(e.memberInfoformData.realName))]),a("v-uni-text",{staticClass:"cell-more"})],1),a("v-uni-view",{staticClass:"info-list-cell info-list-con",attrs:{"hover-class":"cell-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyInfo("sex")}}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("sex")))]),a("v-uni-text",{staticClass:"cell-tip"},[e._v(e._s(e.memberInfoformData.sex))]),a("v-uni-text",{staticClass:"cell-more"})],1),a("v-uni-view",{staticClass:"info-list-cell info-list-con",attrs:{"hover-class":"cell-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyInfo("birthday")}}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("birthday")))]),a("v-uni-text",{staticClass:"cell-tip"},[e._v(e._s(e.memberInfoformData.birthday))]),a("v-uni-text",{staticClass:"cell-more"})],1),a("v-uni-view",{staticClass:"info-list-cell info-list-con",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyInfo("mobile")}}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("mobilePhone")))]),""==e.memberInfoformData.user_tel?a("v-uni-text",{staticClass:"cell-tip"},[e._v(e._s(e.$lang("bindMobile")))]):a("v-uni-text",{staticClass:"cell-tip"},[e._v(e._s(e.memberInfoformData.mobile))]),a("v-uni-text",{staticClass:"cell-more"})],1),a("v-uni-view",{staticClass:"info-list-cell info-list-con",attrs:{"hover-class":"cell-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyInfo("password")}}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("password")))]),a("v-uni-text",{staticClass:"cell-more"})],1),e.addonIsExit.membercancel&&1==e.memberConfig.is_enable?a("v-uni-view",{staticClass:"info-list-cell info-list-con",attrs:{"hover-class":"cell-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyInfo("cancellation")}}},[a("v-uni-text",{staticClass:"cell-tit"},[e._v(e._s(e.$lang("cancellation")))]),a("v-uni-text",{staticClass:"cell-more"})],1):e._e(),e.$util.isWeiXin()?e._e():a("v-uni-view",{staticClass:"save-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.logout.apply(void 0,arguments)}}},[a("v-uni-button",{attrs:{type:"primary"}},[e._v(e._s(e.$lang("logout")))])],1)],1):e._e(),"name"==e.indent?a("v-uni-view",{staticClass:"edit-info"},[a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("nickname")))]),a("v-uni-input",{staticClass:"uni-input info-content input-len",attrs:{type:"text",maxlength:"30",placeholder:e.$lang("nickPlaceholder")},model:{value:e.formData.nickName,callback:function(t){e.$set(e.formData,"nickName",t)},expression:"formData.nickName"}})],1),a("v-uni-view",{staticClass:"save-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save("name")}}},[a("v-uni-button",{attrs:{type:"primary"}},[e._v(e._s(e.$lang("save")))])],1)],1):e._e(),"realName"==e.indent?a("v-uni-view",{staticClass:"edit-info"},[a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("realName")))]),a("v-uni-input",{staticClass:"uni-input info-content input-len",attrs:{type:"text",maxlength:"30",placeholder:e.$lang("pleaseRealName")},model:{value:e.formData.realName,callback:function(t){e.$set(e.formData,"realName",t)},expression:"formData.realName"}})],1),a("v-uni-view",{staticClass:"save-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save("realName")}}},[a("v-uni-button",{attrs:{type:"primary"}},[e._v(e._s(e.$lang("save")))])],1)],1):e._e(),"sex"==e.indent?a("v-uni-view",{staticClass:"edit-info"},[a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("sex")))]),a("v-uni-radio-group",{staticClass:"edit-sex-list",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioChange.apply(void 0,arguments)}}},e._l(e.items,(function(t,i){return a("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",["theme-blue"==e.themeStyle?a("v-uni-radio",{attrs:{color:"#1786f8",value:t.value,checked:i===e.formData.sex}}):"theme-green"==e.themeStyle?a("v-uni-radio",{attrs:{color:"#31bb6d",value:t.value,checked:i===e.formData.sex}}):"theme-pink"==e.themeStyle?a("v-uni-radio",{attrs:{color:"#ff547b",value:t.value,checked:i===e.formData.sex}}):"theme-golden"==e.themeStyle?a("v-uni-radio",{attrs:{color:"#c79f45",value:t.value,checked:i===e.formData.sex}}):a("v-uni-radio",{attrs:{color:"#ff4544",value:t.value,checked:i===e.formData.sex}})],1),a("v-uni-view",[e._v(e._s(t.name))])],1)})),1)],1),a("v-uni-view",{staticClass:"save-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save("sex")}}},[a("v-uni-button",{attrs:{type:"primary"}},[e._v(e._s(e.$lang("save")))])],1)],1):e._e(),"birthday"==e.indent?a("v-uni-view",{staticClass:"edit-info edit-birthday-list"},[a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("birthday")))]),a("v-uni-picker",{attrs:{mode:"date",value:e.formData.birthday,start:e.startDate,end:e.endDate},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[e._v(e._s(e.formData.birthday?e.formData.birthday:"请选择生日"))])],1)],1),a("v-uni-view",{staticClass:"save-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save("birthday")}}},[a("v-uni-button",{attrs:{type:"primary"}},[e._v(e._s(e.$lang("save")))])],1)],1):e._e(),"password"==e.indent?a("v-uni-view",{staticClass:"edit-info"},[0==e.memberInfo.password&&""==e.memberInfo.mobile?[a("v-uni-view",{staticClass:"empty"},[a("v-uni-view",{staticClass:"empty_img"},[a("v-uni-image",{attrs:{src:e.$util.img("upload/uniapp/common-empty.png"),mode:"aspectFit"}})],1),a("v-uni-view",{staticClass:"color-tip margin-top margin-bottom"},[e._v("请先绑定手机再执行该操作")]),a("v-uni-button",{staticClass:"button color-base-bg",attrs:{type:"primary",size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.modifyInfo("mobile")}}},[e._v("立即绑定")])],1)]:[e.memberInfo.password?a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("nowPassword")))]),a("v-uni-input",{staticClass:"uni-input info-content input-len",attrs:{type:"password",maxlength:"30",placeholder:e.$lang("nowPassword")},model:{value:e.formData.currentPassword,callback:function(t){e.$set(e.formData,"currentPassword",t)},expression:"formData.currentPassword"}})],1):[a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("confirmCode")))]),a("v-uni-input",{staticClass:"uni-input info-content",attrs:{type:"number",maxlength:"4",placeholder:e.$lang("confirmCode")},model:{value:e.formData.mobileVercode,callback:function(t){e.$set(e.formData,"mobileVercode",t)},expression:"formData.mobileVercode"}}),a("v-uni-image",{staticClass:"captcha",attrs:{src:e.captcha.img},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCaptcha.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("animateCode")))]),a("v-uni-input",{staticClass:"uni-input info-content",attrs:{type:"number",maxlength:"6",placeholder:e.$lang("animateCode")},model:{value:e.formData.mobileDynacode,callback:function(t){e.$set(e.formData,"mobileDynacode",t)},expression:"formData.mobileDynacode"}}),a("v-uni-button",{staticClass:"dynacode",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.passwordMoblieCode()}}},[e._v(e._s(e.formData.mobileCodeText))])],1),a("v-uni-view",{staticClass:"color-tip font-size-goods-tag set-pass-tips"},[e._v("点击“获取动态码”，将会向您已绑定的手机号"+e._s(e._f("mobile")(e.memberInfoformData.mobile))+"发送验证码")])],a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("newPassword")))]),a("v-uni-input",{staticClass:"uni-input info-content input-len",attrs:{type:"password",maxlength:"30",placeholder:e.$lang("newPassword")},model:{value:e.formData.newPassword,callback:function(t){e.$set(e.formData,"newPassword",t)},expression:"formData.newPassword"}})],1),a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("confirmPassword")))]),a("v-uni-input",{staticClass:"uni-input info-content input-len",attrs:{type:"password",maxlength:"30",placeholder:e.$lang("confirmPassword")},model:{value:e.formData.confirmPassword,callback:function(t){e.$set(e.formData,"confirmPassword",t)},expression:"formData.confirmPassword"}})],1),a("v-uni-view",{staticClass:"save-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save("password")}}},[a("v-uni-button",{attrs:{type:"primary"}},[e._v(e._s(e.$lang("save")))])],1)]],2):e._e(),"mobile"==e.indent?a("v-uni-view",{staticClass:"edit-info"},[a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("phoneNumber")))]),a("v-uni-input",{staticClass:"uni-input info-content",attrs:{type:"number",maxlength:"11",placeholder:e.$lang("phoneNumber")},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("confirmCode")))]),a("v-uni-input",{staticClass:"uni-input info-content",attrs:{type:"number",maxlength:"4",placeholder:e.$lang("confirmCode")},model:{value:e.formData.mobileVercode,callback:function(t){e.$set(e.formData,"mobileVercode",t)},expression:"formData.mobileVercode"}}),a("v-uni-image",{staticClass:"captcha",attrs:{src:e.captcha.img},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCaptcha.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"edit-info-box"},[a("v-uni-text",{staticClass:"info-name"},[e._v(e._s(e.$lang("animateCode")))]),a("v-uni-input",{staticClass:"uni-input info-content",attrs:{type:"number",maxlength:"6",placeholder:e.$lang("animateCode")},model:{value:e.formData.mobileDynacode,callback:function(t){e.$set(e.formData,"mobileDynacode",t)},expression:"formData.mobileDynacode"}}),a("v-uni-button",{staticClass:"dynacode",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindMoblieCode()}}},[e._v(e._s(e.formData.mobileCodeText))])],1),a("v-uni-view",{staticClass:"save-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save("mobile")}}},[a("v-uni-button",{attrs:{type:"primary"}},[e._v(e._s(e.$lang("save")))])],1)],1):e._e(),a("loading-cover",{ref:"loadingCover"})],1)},s=[]},"1afb":function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("d696")),s=i(a("2613")),o={data:function(){return{}},mixins:[n.default,s.default],onShow:function(){uni.getStorageSync("token")||this.$util.redirectTo("/pages/login/login/login",{back:"/pages/member/info/info"},"redirectTo")},filters:{mobile:function(e){return e.substring(0,3)+"****"+e.substring(7)}}};t.default=o},"54dd":function(e,t,a){"use strict";var i=a("7e92"),n=a.n(i);n.a},"5e1f":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.info-head .head-nav[data-v-49ee1f3c]{width:100%;height:0;background:#fff}.info-head .head-nav.active[data-v-49ee1f3c]{padding-top:%?40?%}.captcha[data-v-49ee1f3c]{width:%?170?%;height:%?50?%}.info-list-cell[data-v-49ee1f3c]{display:flex;justify-content:space-between;align-items:center;padding:%?24?% %?30?%;position:relative;line-height:%?50?%;background-color:#fff}.info-list-cell[data-v-49ee1f3c]:first-child{padding:%?28?% %?30?%}.info-list-cell .cell-tip1[data-v-49ee1f3c]{margin-right:%?40?%}.info-list-cell.log-out-btn[data-v-49ee1f3c]{margin-top:%?40?%}.info-list-cell.log-out-btn .cell-tit[data-v-49ee1f3c]{margin:auto}.info-list-cell .info-list-head[data-v-49ee1f3c]{border:%?1?% solid #eee;width:%?82?%;height:%?82?%;border-radius:50%}.info-list-cell .info-list-head uni-image[data-v-49ee1f3c]{max-width:100%;max-height:100%}.info-list-cell.info-list-con ~ .info-list-cell.info-list-con[data-v-49ee1f3c]:after{content:"";position:absolute;left:%?30?%;right:%?30?%;top:0;border-bottom:%?1?% solid #eee}.info-list-cell .cell-tip[data-v-49ee1f3c]{margin-left:auto;color:#909399;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:%?470?%}.info-list-cell .cell-more[data-v-49ee1f3c]{margin-left:%?10?%;width:%?32?%;height:100%}.info-list-cell .cell-more[data-v-49ee1f3c]:after{content:"";display:block;width:%?12?%;height:%?12?%;border:%?2?% solid #bbb;border-right-color:transparent;border-bottom-color:transparent;-webkit-transform:rotate(135deg);transform:rotate(135deg)}.edit-info-box[data-v-49ee1f3c]{margin-top:%?20?%;display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?40?%;min-height:%?50?%;background-color:#fff}.edit-info-box .info-name[data-v-49ee1f3c]{width:%?150?%;font-size:%?28?%;text-align:left}.edit-info-box .info-content[data-v-49ee1f3c]{margin-right:auto;width:%?250?%;font-size:%?28?%;padding:0}.edit-info-box .info-content[data-v-49ee1f3c]:first-of-type{width:auto!important}.edit-info-box .dynacode[data-v-49ee1f3c]{margin:0;padding:0 %?10?%;width:%?250?%;height:%?60?%;font-size:%?28?%;line-height:%?60?%;color:#fff;word-break:break-all}.edit-info-box .edit-sex-list[data-v-49ee1f3c]{display:flex}.edit-info-box .edit-sex-list uni-label[data-v-49ee1f3c]{display:flex;margin-left:%?30?%;align-items:center}.edit-info-box uni-radio .uni-radio-input[data-v-49ee1f3c]{width:%?32?%;height:%?32?%}.set-pass-tips[data-v-49ee1f3c]{padding:%?20?% %?20?% 0 %?20?%}.input-len[data-v-49ee1f3c]{width:%?500?%!important}.save-item[data-v-49ee1f3c]{margin-top:%?50?%}.save-item uni-button[data-v-49ee1f3c]{border-radius:%?94?%;font-size:%?30?%}.empty[data-v-49ee1f3c]{width:100%;display:flex;flex-direction:column;align-items:center;padding:%?20?%;box-sizing:border-box;justify-content:center;padding-top:%?80?%}.empty .empty_img[data-v-49ee1f3c]{width:63%;height:%?450?%}.empty .empty_img uni-image[data-v-49ee1f3c]{width:100%;height:100%}.empty .iconfont[data-v-49ee1f3c]{font-size:%?190?%;color:#909399;line-height:1.2}.empty uni-button[data-v-49ee1f3c]{min-width:%?300?%;margin-top:%?100?%;height:%?70?%;line-height:%?70?%;font-size:%?28?%}',""]),e.exports=t},"7e92":function(e,t,a){var i=a("5e1f");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("10e5113d",i,!0,{sourceMap:!1,shadowMode:!1})},"927d":function(e,t,a){"use strict";a.r(t);var i=a("0be2"),n=a("a68f");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("54dd");var o,r=a("f0c5"),l=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"49ee1f3c",null,!1,i["a"],o);t["default"]=l.exports},a68f:function(e,t,a){"use strict";a.r(t);var i=a("1afb"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},d696:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("c975"),a("ac1f"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=i(a("1da1")),s=i(a("ecd4")),o={data:function(){return{registerConfig:{},indent:"all",customNavTitle:"",memberInfo:{headimg:""},formData:{userHeadImg:"",number:"",nickName:"",sex:"",realName:"",birthday:"",currentPassword:"",newPassword:"",confirmPassword:"",mobile:"",mobileVercode:"",mobileDynacode:"",mobileCodeText:""},memberInfoformData:{userHeadImg:"",number:"",nickName:"",sex:"",realName:"",birthday:"",currentPassword:"",newPassword:"",confirmPassword:"",mobile:"",mobileVercode:"",mobileDynacode:"",mobileCodeText:""},langList:[],langIndex:0,seconds:120,timer:null,isSend:!1,captcha:{id:"",img:""},isIphoneX:!1,items:[{value:"0",name:"未知"},{value:"1",name:"男",checked:"true"},{value:"2",name:"女"}],current:0,memberConfig:{is_audit:0,is_enable:0}}},onLoad:function(e){this.customNavTitle=this.$lang("title"),this.formData.mobileCodeText=this.$lang("findanimateCode"),e.back&&(this.back=e.back),this.getCaptcha(),"mobile"==e.action&&(this.indent="mobile",this.customNavTitle=this.$lang("bindPhone")),this.getRegisterConfig(),this.isIphoneX=this.$util.uniappIsIPhoneX()},onShow:function(){this.initLang(),this.getInfo(),this.getMemberConfig()},onHide:function(){this.seconds=120,this.formData.mobileCodeText="获取动态码",this.isSend=!1,clearInterval(this.timer)},watch:{seconds:function(e){0==e&&(this.seconds=120,this.formData.mobileCodeText="获取动态码",this.isSend=!1,clearInterval(this.timer))}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},methods:{initLang:function(){if(this.langList=this.$langConfig.list(),uni.getStorageSync("lang")){for(var e=0;e<this.langList.length;e++)if(this.langList[e].value==uni.getStorageSync("lang")){this.langIndex=e;break}}else this.langIndex=0;this.$langConfig.refresh()},getInfo:function(){var e=this;this.$api.sendRequest({url:"/api/member/info",success:function(t){0==t.code&&(e.indent="all",e.memberInfo=t.data,e.memberInfoformData.userHeadImg=e.memberInfo.headimg,e.memberInfoformData.number=e.memberInfo.username,e.memberInfoformData.nickName=e.memberInfo.nickname,e.memberInfoformData.realName=e.memberInfo.realname?e.memberInfo.realname:"请输入真实姓名",e.memberInfoformData.sex=0==e.memberInfo.sex?"未知":1==e.memberInfo.sex?"男":"女",e.memberInfoformData.birthday=e.memberInfo.birthday?e.$util.timeStampTurnTime(e.memberInfo.birthday,"YYYY-MM-DD"):"请选择生日",e.memberInfoformData.mobile=e.memberInfo.mobile,e.formData.nickName=e.memberInfo.nickname,e.formData.realName=e.memberInfo.realname,e.formData.sex=e.memberInfo.sex,e.formData.birthday=e.memberInfo.birthday?e.$util.timeStampTurnTime(e.memberInfo.birthday,"YYYY-MM-DD"):"请选择生日"),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(t){e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},modifyInfo:function(e){var t=this;if("name"==e&&(this.indent=e,this.customNavTitle=this.$lang("modifyNickname")),"password"==e&&(this.indent=e,this.customNavTitle=this.$lang("modifyPassword")),"realName"==e&&(this.indent=e,this.customNavTitle=this.$lang("realName")),"sex"==e&&(this.indent=e,this.customNavTitle=this.$lang("sex")),"birthday"==e&&(this.indent=e,this.customNavTitle=this.$lang("birthday")),"mobile"==e&&(this.indent=e,this.getCaptcha(),this.customNavTitle=this.$lang("bindPhone")),"language"==e){for(var a=[],i=0;i<this.langList.length;i++)a.push(this.langList[i].name);uni.showActionSheet({itemList:a,success:function(e){t.langIndex!=e.tapIndex&&t.$langConfig.change(t.langList[e.tapIndex].value)}})}"cancellation"==e&&(this.indent=e,this.customNavTitle=this.$lang("cancellation"),this.getCancelStatus())},getCancelStatus:function(){var e=this;this.$api.sendRequest({url:"/membercancel/api/membercancel/info",success:function(t){t.code>=0&&(t.data?0==t.data.status?e.$util.redirectTo("/otherpages/member/cancelstatus/cancelstatus",{back:"/pages/member/info/info"}):1==t.data.status?e.$util.redirectTo("/otherpages/member/cancelsuccess/cancelsuccess",{back:"/pages/member/info/info"}):e.$util.redirectTo("/otherpages/member/cancelrefuse/cancelrefuse",{back:"/pages/member/info/info"}):e.$util.redirectTo("/otherpages/member/cancellation/cancellation",{back:"/pages/member/info/info"}))}})},NavReturn:function(){"all"==this.indent?this.back?this.$util.redirectTo(this.back,{},"redirectTo"):this.$util.redirectTo("/pages/member/index/index",{},"reLaunch"):(this.indent="all",this.customNavTitle=this.$lang("title"),this.initFormData())},getCaptcha:function(){var e=this;this.$api.sendRequest({url:"/api/captcha/captcha",data:{captcha_id:this.captcha.id},success:function(t){t.code>=0&&(e.captcha=t.data,e.captcha.img=e.captcha.img.replace(/\r\n/g,""))}})},logout:function(){var e=this;uni.showModal({title:"提示",content:"确定要退出登录吗",success:function(t){t.confirm&&(uni.removeStorage({key:"token",success:function(t){uni.setStorageSync("loginLock",1),uni.removeStorageSync("userInfo"),e.$store.dispatch("getCartNumber").then((function(e){})),e.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}}),uni.removeStorage({key:"is_wholesaler"}))}})},headImage:function(){this.$util.redirectTo("/otherpages/member/modify_face/modify_face")},testBinding:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkMobile();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))()},getMemberConfig:function(){var e=this;this.$api.sendRequest({url:"/membercancel/api/membercancel/config",success:function(t){t.code>=0&&(e.memberConfig=t.data)}})},save:function(e){switch(e){case"name":this.modifyNickName();break;case"realName":this.modifyRealName();break;case"sex":this.modifySex();break;case"birthday":this.modifyBirthday();break;case"password":this.modifyPassword();break;case"mobile":this.modifyMobile();break}},modifyNickName:function(){var e=this;if(this.formData.nickName!=this.memberInfo.nickname){var t=[{name:"nickName",checkType:"required",errorMsg:this.$lang("noEmityNickname")}];if(t.length){var a=s.default.check(this.formData,t);a?this.$api.sendRequest({url:"/api/member/modifynickname",data:{nickname:this.formData.nickName},success:function(t){0==t.code?(e.$util.showToast({title:e.$lang("updateSuccess")}),e.NavReturn(),e.getInfo()):e.$util.showToast({title:t.message})}}):this.$util.showToast({title:s.default.error})}}else this.$util.showToast({title:this.$lang("alikeNickname")})},modifyRealName:function(){var e=this;if(this.formData.realName==this.memberInfo.realname&&this.memberInfo.realname)this.$util.showToast({title:"与原真实姓名一致，无需修改"});else{var t=[{name:"realName",checkType:"required",errorMsg:"真实姓名不能为空"}];if(t.length){var a=s.default.check(this.formData,t);a?this.$api.sendRequest({url:"/api/member/modifyrealname",data:{realname:this.formData.realName},success:function(t){0==t.code?(e.$util.showToast({title:e.$lang("updateSuccess")}),e.NavReturn(),e.getInfo()):e.$util.showToast({title:t.message})}}):this.$util.showToast({title:s.default.error})}}},radioChange:function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].value===e.target.value){this.formData.sex=t;break}},modifySex:function(){var e=this;this.$api.sendRequest({url:"/api/member/modifysex",data:{sex:this.formData.sex},success:function(t){0==t.code?(e.$util.showToast({title:e.$lang("updateSuccess")}),e.NavReturn(),e.getInfo()):e.$util.showToast({title:t.message})}})},bindDateChange:function(e){this.formData.birthday=e.target.value},getDate:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return"start"===e?a-=60:"end"===e&&(a+=2),i=i>9?i:"0"+i,n=n>9?n:"0"+n,"".concat(a,"-").concat(i,"-").concat(n)},modifyBirthday:function(){var e=this;this.$api.sendRequest({url:"/api/member/modifybirthday",data:{birthday:this.$util.timeTurnTimeStamp(this.formData.birthday)},success:function(t){0==t.code?(e.$util.showToast({title:e.$lang("updateSuccess")}),e.NavReturn(),e.getInfo()):e.$util.showToast({title:t.message})}})},getRegisterConfig:function(){var e=this;this.$api.sendRequest({url:"/api/register/config",success:function(t){t.code>=0&&(e.registerConfig=t.data.value)}})},modifyPassword:function(){var e=this;if(this.memberInfo.password)var t=[{name:"currentPassword",checkType:"required",errorMsg:this.$lang("pleaseInputOldPassword")},{name:"newPassword",checkType:"required",errorMsg:this.$lang("pleaseInputNewPassword")}];else t=[{name:"mobileVercode",checkType:"required",errorMsg:this.$lang("confirmCodeInput")},{name:"mobileDynacode",checkType:"required",errorMsg:this.$lang("animateCodeInput")},{name:"newPassword",checkType:"required",errorMsg:this.$lang("pleaseInputNewPassword")}];var a=this.registerConfig;if(a.pwd_len>0&&t.push({name:"newPassword",checkType:"lengthMin",checkRule:a.pwd_len,errorMsg:"新密码长度不能小于"+a.pwd_len+"位"}),a.pwd_complexity){var i="密码需包含",n="";-1!=a.pwd_complexity.indexOf("number")&&(n+="(?=.*?[0-9])",i+="数字"),-1!=a.pwd_complexity.indexOf("letter")&&(n+="(?=.*?[a-z])",i+="、小写字母"),-1!=a.pwd_complexity.indexOf("upper_case")&&(n+="(?=.*?[A-Z])",i+="、大写字母"),-1!=a.pwd_complexity.indexOf("symbol")&&(n+="(?=.*?[#?!@$%^&*-])",i+="、特殊字符"),t.push({name:"newPassword",checkType:"reg",checkRule:n,errorMsg:i})}var o=s.default.check(this.formData,t);if(o){if(this.formData.currentPassword==this.formData.newPassword)return void this.$util.showToast({title:"新密码不能与原密码相同"});if(this.formData.newPassword!=this.formData.confirmPassword)return void this.$util.showToast({title:"两次密码不一致"});this.$api.sendRequest({url:"/api/member/modifypassword",data:{new_password:this.formData.newPassword,old_password:this.formData.currentPassword,code:this.formData.mobileDynacode,key:uni.getStorageSync("password_mobile_key")},success:function(t){0==t.code?(e.$util.showToast({title:e.$lang("updateSuccess")}),e.NavReturn(),e.getInfo(),uni.removeStorageSync("password_mobile_key")):e.$util.showToast({title:t.message})}})}else this.$util.showToast({title:s.default.error})},vertifyMobile:function(){var e=[{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"}],t=s.default.check(this.formData,e);return!!t||(this.$util.showToast({title:s.default.error}),!1)},checkMobile:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.vertifyMobile()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$api.sendRequest({url:"/api/member/checkmobile",data:{mobile:e.formData.mobile},async:!1});case 4:if(a=t.sent,0==a.code){t.next=8;break}return e.$util.showToast({title:a.message}),t.abrupt("return",!1);case 8:return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})))()},bindMoblieCode:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(120==e.seconds){t.next=2;break}return t.abrupt("return");case 2:a=[{name:"mobile",checkType:"phoneno",errorMsg:e.$lang("surePhoneNumber")},{name:"mobileVercode",checkType:"required",errorMsg:e.$lang("confirmCodeInput")}],i=s.default.check(e.formData,a),i&&!e.isSend?(e.isSend=!0,e.$api.sendRequest({url:"/api/member/bindmobliecode",data:{mobile:e.formData.mobile,captcha_id:e.captcha.id,captcha_code:e.formData.mobileVercode},success:function(t){var a=t.data;a.key?(120==e.seconds&&null==e.timer&&(e.timer=setInterval((function(){e.seconds--,e.formData.mobileCodeText="已发送("+e.seconds+"s)"}),1e3)),uni.setStorageSync("mobile_key",a.key)):(e.$util.showToast({title:t.message}),e.isSend=!1)},fail:function(t){e.isSend=!1,e.getCaptcha()}})):e.$util.showToast({title:s.default.error?s.default.error:"请勿重复点击"});case 5:case"end":return t.stop()}}),t)})))()},modifyMobile:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[{name:"mobile",checkType:"phoneno",errorMsg:e.$lang("surePhoneNumber")},{name:"mobileVercode",checkType:"required",errorMsg:e.$lang("confirmCodeInput")},{name:"mobileDynacode",checkType:"required",errorMsg:e.$lang("animateCodeInput")}],i=s.default.check(e.formData,a),!i){t.next=9;break}if(e.formData.mobile!=e.memberInfo.mobile){t.next=6;break}return e.$util.showToast({title:e.$lang("alikePhone")}),t.abrupt("return");case 6:e.$api.sendRequest({url:"/api/member/modifymobile",data:{mobile:e.formData.mobile,captcha_id:e.captcha.id,captcha_code:e.formData.mobileVercode,code:e.formData.mobileDynacode,key:uni.getStorageSync("mobile_key")},success:function(t){0==t.code?(e.$util.showToast({title:e.$lang("updateSuccess")}),e.back?e.$util.redirectTo("/otherpages/member/pay_password/pay_password",{back:e.back},"redirectTo"):(e.NavReturn(),e.getInfo())):e.$util.showToast({title:t.message})},fail:function(t){e.isSend=!1,e.getCaptcha()}}),t.next=10;break;case 9:e.$util.showToast({title:s.default.error});case 10:case"end":return t.stop()}}),t)})))()},passwordMoblieCode:function(){var e=this;120==this.seconds&&(""!=this.formData.mobileVercode?this.isSend?this.$util.showToast({title:"请勿重复点击"}):(this.isSend=!0,this.$api.sendRequest({url:"/api/member/pwdmobliecode",data:{captcha_id:this.captcha.id,captcha_code:this.formData.mobileVercode},success:function(t){var a=t.data;a.key?(120==e.seconds&&null==e.timer&&(e.timer=setInterval((function(){e.seconds--,e.formData.mobileCodeText="已发送("+e.seconds+"s)"}),1e3)),uni.setStorageSync("password_mobile_key",a.key)):(e.$util.showToast({title:t.message}),e.isSend=!1)},fail:function(t){e.isSend=!1,e.getCaptcha()}})):this.$util.showToast({title:this.$lang("confirmCodeInput")}))},initFormData:function(){this.formData.currentPassword="",this.formData.newPassword="",this.formData.confirmPassword="",this.formData.mobileVercode="",this.formData.mobileDynacode="",this.formData.mobile=""}}};t.default=o}}]);