(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/ns-goods-recommend/ns-goods-recommend"],{"27e6":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("a34a")),o=s(n("a5a8")),a=s(n("2009"));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,o,a,s){try{var r=e[a](s),u=r.value}catch(l){return void n(l)}r.done?t(u):Promise.resolve(u).then(i,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}var l=function(){n.e("components/ns-loading/ns-loading").then(function(){return resolve(n("b5ab"))}.bind(null,n)).catch(n.oe)},c={name:"ns-goods-recommend",components:{nsLoading:l},data:function(){return{list:[],page:1,isAll:!0,isClick:!0,showLoading:!1,is_wholesaler:a.default.is_wholesaler,isOpenVirtualSale:a.default.isOpenVirtualSale}},mixins:[o.default],props:{isLike:{type:Boolean,default:!0},size:{type:[Number,String],default:10},auto:{type:Boolean,default:!0},load:{type:Boolean,default:!0}},onLoad:function(){var t=this;return u(i.default.mark((function n(){var o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t,console.log(t.is_wholesaler,"is_wholesaler"),!e.getStorageSync("token")){n.next=6;break}return n.next=5,t.$api.sendRequest({url:"/api/member/detail",async:!1});case 5:o=n.sent;case 6:console.log(o);case 7:case"end":return n.stop()}}),n)})))()},mounted:function(){var t=this;return u(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.auto){n.next=7;break}if(!e.getStorageSync("token")){n.next=6;break}return n.next=4,t.$api.sendRequest({url:"/api/member/detail",async:!1});case 4:n.sent,console.log(t.is_wholesaler,"is_wholesaler");case 6:t.getLikeList();case 7:case"end":return n.stop()}}),n)})))()},methods:{init:function(){this.list=[],this.page=1,this.isAll=!0},toDetail:function(e){var t={sku_id:e.sku_id};this.$util.redirectTo("/pages/goods/detail/detail",t)},getLikeList:function(e){var t=this,n=this;if(this.isClick&&this.isAll)return this.isClick=!1,this.page>1&&(this.showLoading=!0),new Promise((function(i,o){n.$api.sendRequest({url:"/api/goodssku/recommend",data:{page:t.page,page_size:t.auto?t.size:e},success:function(e){t.showLoading=!1,t.isClick=!0,0==e.code&&(1==t.page&&(t.list=[]),t.list=t.list.concat(e.data.list),t.list.length==e.data.count&&(t.isAll=!1),t.page+=1,i(e.data.list))}})}))},goodsImg:function(e){var t=e.split(",");return t[0]?this.$util.img(t[0],{size:"mid"}):this.$util.getDefaultImage().default_goods_img},imgError:function(e){this.list[e].goods_image=this.$util.getDefaultImage().default_goods_img},showPrice:function(e){var t=e.discount_price;return e.member_price&&parseFloat(e.member_price)<parseFloat(t)&&(t=e.member_price),t},goodsTag:function(e){switch(e.recommend_way){case 1:return"新品";case 2:return"精品";case 3:return"推荐";default:return""}}}};t.default=c}).call(this,n("543d")["default"])},"2ce6":function(e,t,n){"use strict";n.r(t);var i=n("426f"),o=n("b52b");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("7522");var s,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=u.exports},"426f":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={nsLoading:function(){return n.e("components/ns-loading/ns-loading").then(n.bind(null,"b5ab"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.list.length?e.$util.img("/upload/uniapp/guess-like.png"):null),i=e.$lang("common.currencySymbol"),o=e.$lang("common.currencySymbol"),a=e.list.length?e.__map(e.list,(function(t,n){var i=e.__get_orig(t),o=e.goodsImg(t.goods_image),a=e.goodsTag(t),s=""!=a?e.goodsTag(t):null,r=t.member_price&&t.member_price==e.showPrice(t),u=r?e.$util.img("upload/uniapp/index/VIP.png"):null,l=r||1!=t.promotion_type?null:e.$util.img("upload/uniapp/index/discount.png");return{$orig:i,m0:o,m1:a,m2:s,m5:r,g1:u,g2:l}})):null;e.$mp.data=Object.assign({},{$root:{g0:n,m3:i,m4:o,l0:a}})},a=[]},7522:function(e,t,n){"use strict";var i=n("b356"),o=n.n(i);o.a},b356:function(e,t,n){},b52b:function(e,t,n){"use strict";n.r(t);var i=n("27e6"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/ns-goods-recommend/ns-goods-recommend-create-component',
    {
        'components/ns-goods-recommend/ns-goods-recommend-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("2ce6"))
        })
    },
    [['components/ns-goods-recommend/ns-goods-recommend-create-component']]
]);
