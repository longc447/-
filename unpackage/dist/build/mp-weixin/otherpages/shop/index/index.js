(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/shop/index/index"],{"3c38":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a")),o=(a(n("bccd")),n("8cbc"),a(n("faec")));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i,o,a,r){try{var s=t[a](r),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(i,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}var u=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("b9d3"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/diy-bottom-nav/diy-bottom-nav").then(function(){return resolve(n("7ed3"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/diy-index-page/diy-index-page").then(function(){return resolve(n("1b70"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/diy-group/diy-group").then(function(){return resolve(n("d2bf"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/ns-navbar/ns-navbar").then(function(){return resolve(n("3ea6"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/ns-copyright/ns-copyright").then(function(){return resolve(n("047d"))}.bind(null,n)).catch(n.oe)},p=t.getSystemInfoSync(),g={components:{uniPopup:u,diyBottomNav:c,nsNavbar:h,diyIndexPage:l,diyGroup:d,nsCopyRight:f},data:function(){return{diyData:{global:{title:"",popWindow:{imageUrl:"",count:-1,link:{}}},value:[]},navTitle:"",webSiteInfo:null,memberId:0,city:"",siteId:0,isIphoneX:!1,pageHeight:"0",headerHeight:"0",bottomHeight:"0",topIndexValue:null,statusBarHeight:p.statusBarHeight,collectTop:44,showTip:!1,mpCollect:!1,preview:0,isConfigDiy:!1,is_wholesaler:""}},mixins:[o.default],computed:{top:function(){var t=0;return t=this.isIphoneX?180:140,t},bgColor:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.bgColor),t},bgImg:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.topNavbg?"url("+this.$util.img(this.diyData.global.bgUrl)+")":this.diyData.global.bgColor),t},bgUrl:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.topNavbg?"transparent":this.diyData.global.bgUrl),t},bgNav:function(){return this.diyData.global.topNavColor?{background:this.diyData.global.topNavColor}:{background:"#ffffff"}},backgroundUrl:function(){var t=this.bgUrl?"background:url("+this.$util.img(this.bgUrl)+") no-repeat 0 0/100%":"";return t},scrollHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc("+this.pageHeight+"px - "+this.headerHeight+" - "+this.bottomHeight+")":"100vh"},scrollTopHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc("+this.pageHeight+"px - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"},textNavColor:function(){return this.diyData.global.textNavColor?this.diyData.global.textNavColor:"#ffffff"},openBottomNav:function(){var t=!1;return this.diyData&&this.diyData.global&&(t=this.diyData.global.openBottomNav),t},minHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc(100vh - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"},globalS:function(){return this.diyData.global}},onPullDownRefresh:function(){var t=this;return s(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getDiyInfo();case 2:case"end":return e.stop()}}),e)})))()},onLoad:function(e){var n=this;if(t.hideTabBar(),this.siteId=parseInt(e.site_id)||0,this.isIphoneX=this.$util.uniappIsIPhoneX(),this.getWholesale(),this.siteId&&t.removeStorageSync("city"),e.source_member&&t.setStorageSync("source_member",e.source_member),e.scene){var i=decodeURIComponent(e.scene);i=i.split("&"),i.length&&i.forEach((function(t){-1!=t.indexOf("site_id")&&(n.siteId=t.split("-")[1])}))}},onHide:function(){this.$store.commit("setDiySeckillInterval",null)},onShow:function(){var t=this;return s(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.refresh();case 2:t.getHeight(),t.$store.commit("setDiySeckillInterval",1);case 4:case"end":return e.stop()}}),e)})))()},onPageScroll:function(t){this.$refs.topNav&&(t.scrollTop>=20?this.$refs.topNav.navTopBg():this.$refs.topNav.unSetnavTopBg())},methods:{getWholesale:function(){var t=this;return s(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.sendRequest({url:"/api/member/detail",async:!1});case 2:n=e.sent,0==n.code&&(console.log(n,n.is_wholesaler,"is_wholesaler"),t.is_wholesaler=n.is_wholesaler);case 4:case"end":return e.stop()}}),e)})))()},refresh:function(){var e=this;return s(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.siteId){n.next=11;break}return e.$langConfig.refresh(),t.getStorageSync("token")&&e.getMemberId(),e.$store.dispatch("defaultImg"),e.$store.dispatch("getThemeStyle"),e.getWebSitefo(),t.getStorageSync("city")?e.city=t.getStorageSync("city").title:(t.setStorageSync("city",{id:0,title:"全国"}),e.city="全国"),n.next=9,e.getDiyInfo();case 9:n.next=12;break;case 11:e.$util.redirectTo("/pages/index/index/index",{},"reLaunch");case 12:case"end":return n.stop()}}),n)})))()},getHeight:function(){var e=this;t.getSystemInfo({success:function(t){e.pageHeight=t.screenHeight}}),this.$nextTick((function(){var n=t.createSelectorQuery().in(e);n.select(".page-header").boundingClientRect((function(t){e.headerHeight=t.height+"px"})).exec()})),this.$nextTick((function(){var n=t.createSelectorQuery().in(e);n.select(".page-bottom").boundingClientRect((function(t){e.bottomHeight="55px"})).exec()}))},getDiyInfo:function(){var e=this;return s(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$api.sendRequest({url:"/api/diyview/info",data:{name:"DIY_VIEW_SHOP_INDEX",site_id:e.siteId},async:!0,success:function(n){if(0!=n.code||!n.data)return e.$refs.loadingCover&&e.$refs.loadingCover.hide(),void(e.diyData={});var i=n.data;if(i.value=i.value.replace(/\@/g,"'"),i.value){e.diyData=JSON.parse(i.value),e.$langConfig.title(e.diyData.global.title),e.navTitle=e.diyData.global.title,e.mpCollect=e.diyData.global.mpCollect,e.diyData.global.popWindow&&e.diyData.global.popWindow.imageUrl&&setTimeout((function(){if(1==e.diyData.global.popWindow.count){var n=t.getStorageSync("shop_diy_popwindow_count");(e.$refs.uniPopupWindow&&""==n||e.$refs.uniPopupWindow&&1==n)&&(e.$refs.uniPopupWindow.open(),t.setStorageSync("shop_diy_popwindow_count",1))}else 0==e.diyData.global.popWindow.count&&(e.$refs.uniPopupWindow.open(),t.setStorageSync("shop_diy_popwindow_count",0))}),500);for(var o=0;o<e.diyData.value.length;o++)"TopCategory"==e.diyData.value[o].controller&&(e.topIndexValue=e.diyData.value[o]);!t.getStorageSync("isCollect")&&e.diyData.global.mpCollect&&(e.$refs.collectPopupWindow.open(),e.showTip=!0)}t.stopPullDownRefresh(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(n){t.stopPullDownRefresh(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}});case 1:case"end":return n.stop()}}),n)})))()},closePopupWindow:function(){this.$refs.uniPopupWindow.close(),t.setStorageSync("shop_diy_popwindow_count",-1)},closeCollectPopupWindow:function(){this.$refs.collectPopupWindow.close(),t.setStorageSync("isCollect",!0)},redirectTo:function(t){this.siteId&&(t.site_id=this.siteId),this.$util.diyRedirectTo(t)},getMemberId:function(){var t=this;this.$api.sendRequest({url:"/api/member/id",success:function(e){e.code>=0&&(t.memberId=e.data)}})},getWebSitefo:function(){var e=this;this.webSiteInfo=t.getStorageSync("web_site_info"),this.webSiteInfo&&(this.webSiteInfo=JSON.parse(this.webSiteInfo)),this.$api.sendRequest({url:"/api/website/info",success:function(n){var i=n.data;if(i){if(e.webSiteInfo=i,e.webSiteInfo.wap_status)return;e.$refs.uniPopupClose.open(),t.setStorageSync("web_site_info",JSON.stringify(e.webSiteInfo))}}})},previewPage:function(){this.$util.showToast({title:"预览模式无法操作"})},onShareTimeline:function(){var t="";return this.memberId&&(t="source_member="+this.memberId),{title:"",query:t,imageUrl:""}}},onShareAppMessage:function(t){var e="";this.webSiteInfo&&(e=this.webSiteInfo.title);var n="/otherpages/shop/index/index?site_id="+this.siteId;return this.memberId&&(n+="&source_member="+this.memberId),{title:e,path:n,success:function(t){},fail:function(t){}}},onReady:function(){}};e.default=g}).call(this,n("543d")["default"])},"50f9":function(t,e,n){"use strict";var i=n("a25a"),o=n.n(i);o.a},"903f":function(t,e,n){"use strict";n.r(e);var i=n("924b"),o=n("ef57");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("50f9"),n("c534");var r,s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"5d746174",null,!1,i["a"],r);e["default"]=u.exports},"924b":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={nsNavbar:function(){return n.e("components/ns-navbar/ns-navbar").then(n.bind(null,"3ea6"))},diyIndexPage:function(){return n.e("components/diy-index-page/diy-index-page").then(n.bind(null,"1b70"))},diyGroup:function(){return n.e("components/diy-group/diy-group").then(n.bind(null,"d2bf"))},nsCopyright:function(){return n.e("components/ns-copyright/ns-copyright").then(n.bind(null,"047d"))},nsEmpty:function(){return n.e("components/ns-empty/ns-empty").then(n.bind(null,"467b"))},uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"b9d3"))},diyBottomNav:function(){return n.e("components/diy-bottom-nav/diy-bottom-nav").then(n.bind(null,"7ed3"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"f410"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.$util.img(t.diyData.global.popWindow.imageUrl)),i=t.showTip?t.$util.img("/upload/uniapp/collect2.png"):null;t.$mp.data=Object.assign({},{$root:{g0:n,g1:i}})},a=[]},9653:function(t,e,n){},a25a:function(t,e,n){},bbb5:function(t,e,n){"use strict";(function(t){n("c5b8");i(n("66fd"));var e=i(n("903f"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},c534:function(t,e,n){"use strict";var i=n("9653"),o=n.n(i);o.a},ef57:function(t,e,n){"use strict";n.r(e);var i=n("3c38"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a}},[["bbb5","common/runtime","common/vendor"]]]);