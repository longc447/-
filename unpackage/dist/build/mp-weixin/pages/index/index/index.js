(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index/index"],{"0995":function(e,t,n){"use strict";var i=n("517b"),o=n.n(i);o.a},1529:function(e,t,n){"use strict";(function(e){n("f871");i(n("66fd"));var t=i(n("3d04"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"202b":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("a34a")),o=(r(n("23a6")),n("2442"),r(n("a5a8"))),a=r(n("2009"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,i,o,a,r){try{var u=e[a](r),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(i,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function r(e){u(a,i,o,r,c,"next",e)}function c(e){u(a,i,o,r,c,"throw",e)}r(void 0)}))}}var s=function(){n.e("components/yzhua006-update/app-update").then(function(){return resolve(n("a362"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("fa04"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/diy-bottom-nav/diy-bottom-nav").then(function(){return resolve(n("8c8e"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/diy-index-page/diy-index-page").then(function(){return resolve(n("0101"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/diy-group/diy-group").then(function(){return resolve(n("1e36"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/ns-navbar/ns-navbar").then(function(){return resolve(n("c14b"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/ns-copyright/ns-copyright").then(function(){return resolve(n("4953"))}.bind(null,n)).catch(n.oe)},b=e.getSystemInfoSync(),v={components:{uniPopup:l,diyBottomNav:d,nsNavbar:h,diyIndexPage:f,diyGroup:g,nsCopyRight:p,appUpdate:s},data:function(){return{diyData:{global:{title:"",popWindow:{imageUrl:"",count:-1,link:{}}}},navTitle:"",webSiteInfo:null,memberId:0,id:0,city:"",siteId:0,isIphoneX:!1,pageHeight:"0",headerHeight:"0",bottomHeight:"0",topIndexValue:null,statusBarHeight:b.statusBarHeight,collectTop:44,showTip:!1,mpCollect:!1,is_wholesaler:a.default.is_wholesaler}},mixins:[o.default],computed:{top:function(){var e=0;return e=this.isIphoneX?180:140,e},bgColor:function(){var e="";return this.diyData&&this.diyData.global&&(e=this.diyData.global.bgColor),e},bgImg:function(){var e="";return this.diyData&&this.diyData.global&&(e=this.diyData.global.topNavbg?"url("+this.$util.img(this.diyData.global.bgUrl)+")":this.diyData.global.bgColor),e},bgUrl:function(){var e="";return this.diyData&&this.diyData.global&&(e=this.diyData.global.topNavbg?"transparent":this.diyData.global.bgUrl),e},bgNav:function(){return this.diyData.global.topNavColor?{background:this.diyData.global.topNavColor}:{background:"#ffffff"}},backgroundUrl:function(){var e=this.bgUrl?"background:url("+this.$util.img(this.bgUrl)+") no-repeat 0 0/100%":"";return e},scrollHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc("+this.pageHeight+"px - "+this.headerHeight+" - "+this.bottomHeight+")":"100vh"},scrollTopHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc("+this.pageHeight+"px - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"},textNavColor:function(){return this.diyData.global.textNavColor?this.diyData.global.textNavColor:"#ffffff"},openBottomNav:function(){var e=!1;return this.diyData&&this.diyData.global&&(e=this.diyData.global.openBottomNav),e},minHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc(100vh - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"},globalS:function(){return this.diyData.global}},onPullDownRefresh:function(){var e=this;return c(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDiyInfo();case 2:case"end":return t.stop()}}),t)})))()},onLoad:function(t){if(e.hideTabBar(),this.siteId=parseInt(t.site_id)||0,this.isIphoneX=this.$util.uniappIsIPhoneX(),t.web_city&&e.setStorageSync("city",{id:t.web_city,title:decodeURI(t.title)}),this.siteId&&e.removeStorageSync("city"),t.source_member&&e.setStorageSync("source_member",t.source_member),t.scene){var n=decodeURIComponent(t.scene);n=n.split("&"),n.length&&n.forEach((function(t){-1!=t.indexOf("source_member")&&e.setStorageSync("source_member",t.split("-")[1])}))}},onHide:function(){this.$store.commit("setDiySeckillInterval",null)},onShow:function(){var t=this;return c(i.default.mark((function n(){var o,r,u;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(a.default.isMustLogin,"是否强制登陆"),1===a.default.isMustLogin&&(console.log("开始登陆"),o=e.getStorageSync("token"),r=e.getStorageSync("loginLock"),u=e.getStorageSync("unbound"),console.log(o,r,u,"登陆状态",!o&&!r&&!u),o||e.navigateTo({url:"/pages/login/login/login"})),n.next=4,t.refresh();case 4:t.getHeight(),t.$store.commit("setDiySeckillInterval",1),1===a.default.isPfs&&t.$api.sendRequest({url:"/api/member/detail",async:!1}).then((function(t){if(0!=t.code&&console.log("没有启用强制登陆code不会等于0"),0==t.code){console.log(t,"是否是批发商");var n=t.is_wholesaler;3!=n&&e.navigateTo({url:"/pages/login/register/wholesale/wholesale"})}}));case 7:case"end":return n.stop()}}),n)})))()},mounted:function(){console.log("更新")},onPageScroll:function(e){this.$refs.topNav&&(e.scrollTop>=20?this.$refs.topNav.navTopBg():this.$refs.topNav.unSetnavTopBg())},methods:{getWholesale:function(){var e=this;return c(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.sendRequest({url:"/api/member/detail",async:!1});case 2:n=t.sent,0==n.code&&console.log(n,"是否是批发商");case 4:case"end":return t.stop()}}),t)})))()},callback:function(){this.$refs.indexPage&&this.$refs.indexPage.initPageIndex()},refresh:function(){var t=this;return c(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$langConfig.refresh(),e.getStorageSync("token")&&(t.getMemberId(),t.getWholesale()),t.$store.dispatch("defaultImg"),t.$store.dispatch("getThemeStyle"),t.getWebSitefo(),e.getStorageSync("city")?t.city=e.getStorageSync("city").title:(e.setStorageSync("city",{id:0,title:"全国"}),t.city="全国"),n.next=8,t.getDiyInfo();case 8:case"end":return n.stop()}}),n)})))()},getHeight:function(){var t=this;e.getSystemInfo({success:function(e){t.pageHeight=e.screenHeight}}),this.$nextTick((function(){var n=e.createSelectorQuery().in(t);n.select(".page-header").boundingClientRect((function(e){t.headerHeight=e.height+"px"})).exec()})),this.$nextTick((function(){var n=e.createSelectorQuery().in(t);n.select(".page-bottom").boundingClientRect((function(e){t.bottomHeight="55px"})).exec()}))},getDiyInfo:function(){var t=this;return c(i.default.mark((function n(){var o,a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o="DIY_VIEW_INDEX",a=e.getStorageSync("city"),a.id&&(o="DIY_VIEW_CITY_INDEX"),t.$api.sendRequest({url:"/api/diyview/info",data:{name:o,site_id:t.siteId},async:!0,success:function(n){if(0!=n.code||!n.data)return t.$refs.loadingCover&&t.$refs.loadingCover.hide(),void(t.diyData={});var i=n.data;if(i.value=i.value.replace(/\@/g,"'"),i.value){t.diyData=JSON.parse(i.value),t.$langConfig.title(t.diyData.global.title),t.navTitle=t.diyData.global.title,t.mpCollect=t.diyData.global.mpCollect,t.diyData.global.popWindow&&t.diyData.global.popWindow.imageUrl&&setTimeout((function(){if(1==t.diyData.global.popWindow.count){var n=e.getStorageSync("index_popwindow_count");(t.$refs.uniPopupWindow&&""==n||t.$refs.uniPopupWindow&&1==n)&&(t.$refs.uniPopupWindow.open(),e.setStorageSync("index_popwindow_count",1))}else 0==t.diyData.global.popWindow.count&&(t.$refs.uniPopupWindow.open(),e.setStorageSync("index_popwindow_count",0))}),500);for(var o=0;o<t.diyData.value.length;o++)"TopCategory"==t.diyData.value[o].controller&&(t.topIndexValue=t.diyData.value[o]);!e.getStorageSync("isCollect")&&t.diyData.global.mpCollect&&(t.$refs.collectPopupWindow.open(),t.showTip=!0)}e.stopPullDownRefresh(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(n){e.stopPullDownRefresh(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}});case 4:case"end":return n.stop()}}),n)})))()},closePopupWindow:function(){this.$refs.uniPopupWindow.close(),e.setStorageSync("index_popwindow_count",-1)},closeCollectPopupWindow:function(){this.$refs.collectPopupWindow.close(),e.setStorageSync("isCollect",!0)},redirectTo:function(e){this.$util.diyRedirectTo(e)},getMemberId:function(){var e=this;this.$api.sendRequest({url:"/api/member/id",success:function(t){t.code>=0&&(e.memberId=t.data)}})},getWebSitefo:function(){var t=this;this.webSiteInfo=e.getStorageSync("web_site_info"),this.webSiteInfo&&(this.webSiteInfo=JSON.parse(this.webSiteInfo)),this.$api.sendRequest({url:"/api/website/info",success:function(n){var i=n.data;if(i){if(t.webSiteInfo=i,t.webSiteInfo.wap_status)return;t.$refs.uniPopupClose.open(),e.setStorageSync("web_site_info",JSON.stringify(t.webSiteInfo))}}})},onShareTimeline:function(){var e="";return this.memberId&&(e="source_member="+this.memberId),{title:"",query:e,imageUrl:""}}},onShareAppMessage:function(t){var n="";this.webSiteInfo&&(n=this.webSiteInfo.title);var i="/pages/index/index/index",o=e.getStorageSync("city");return o.id&&(i+="?name=DIY_VIEW_CITY_INDEX&web_city="+o.id+"&title="+encodeURI(o.title)),o.id&&this.memberId?i+="&source_member="+this.memberId:this.memberId&&(i+="?source_member="+this.memberId),{title:n,path:i,success:function(e){},fail:function(e){}}},onReady:function(){}};t.default=v}).call(this,n("543d")["default"])},"2a5d":function(e,t,n){},"3d04":function(e,t,n){"use strict";n.r(t);var i=n("5794"),o=n("eef3");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("d57d"),n("0995");var r,u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"35db20f9",null,!1,i["a"],r);t["default"]=c.exports},"517b":function(e,t,n){},5794:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={nsNavbar:function(){return n.e("components/ns-navbar/ns-navbar").then(n.bind(null,"c14b"))},diyIndexPage:function(){return n.e("components/diy-index-page/diy-index-page").then(n.bind(null,"0101"))},diyGroup:function(){return n.e("components/diy-group/diy-group").then(n.bind(null,"1e36"))},nsCopyright:function(){return n.e("components/ns-copyright/ns-copyright").then(n.bind(null,"4953"))},uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"fa04"))},diyBottomNav:function(){return n.e("components/diy-bottom-nav/diy-bottom-nav").then(n.bind(null,"8c8e"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"a197"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.diyData.global&&e.diyData.global.popWindow?e.$util.img(e.diyData.global.popWindow.imageUrl):null),i=e.showTip?e.$util.img("/upload/uniapp/collect2.png"):null;e.$mp.data=Object.assign({},{$root:{g0:n,g1:i}})},a=[]},d57d:function(e,t,n){"use strict";var i=n("2a5d"),o=n.n(i);o.a},eef3:function(e,t,n){"use strict";n.r(t);var i=n("202b"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a}},[["1529","common/runtime","common/vendor"]]]);