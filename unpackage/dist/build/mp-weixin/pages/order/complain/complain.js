(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/complain/complain"],{"563d":function(o,i,n){"use strict";n.r(i);var t=n("9385"),a=n.n(t);for(var e in t)"default"!==e&&function(o){n.d(i,o,(function(){return t[o]}))}(e);i["default"]=a.a},6720:function(o,i,n){"use strict";var t=n("ecdf"),a=n.n(t);a.a},"8b60":function(o,i,n){"use strict";(function(o){n("f871");t(n("66fd"));var i=t(n("d114"));function t(o){return o&&o.__esModule?o:{default:o}}wx.__webpack_require_UNI_MP_PLUGIN__=n,o(i.default)}).call(this,n("543d")["createPage"])},9385:function(o,i,n){"use strict";(function(o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t=a(n("a5a8"));function a(o){return o&&o.__esModule?o:{default:o}}var e=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("fa04"))}.bind(null,n)).catch(n.oe)},l={components:{uniPopup:e},data:function(){return{complainData:{order_goods_info:{sku_image:"",sku_name:""}},detail:{sku_image:""},complain_reason:"",complain_remark:"",action:"",showText:!1}},mixins:[t.default],onLoad:function(o){o.order_goods_id&&(this.order_goods_id=o.order_goods_id)},onShow:function(){this.$langConfig.refresh(),o.getStorageSync("token")?this.getComplainData():this.$util.redirectTo("/pages/login/login/login",{back:"/pages/order/complain/complain?order_goods_id="+this.order_goods_id})},computed:{good_image:function(){return this.complainData.order_goods_info.sku_image?this.$util.img(this.complainData.order_goods_info.sku_image,{size:"mid"}):this.$util.getDefaultImage().default_goods_img}},methods:{goConnect:function(){var i=this;if(o.getStorageSync("token")){var n={site_id:i.shopInfo.site_id,sku_id:i.goodsSkuDetail.sku_id};i.$util.redirectTo("/otherpages/chat/room/room",n)}else i.$util.redirectTo("/pages/login/login/login")},openPopup:function(o){this.$refs[o].open()},closePopup:function(o){this.$refs[o].close()},textBlur:function(){o.pageScrollTo({scrollTop:0,duration:0})},getComplainData:function(){var o=this;this.$api.sendRequest({url:"/api/ordercomplain/detail",data:{order_goods_id:this.order_goods_id},success:function(i){i.code>=0?(o.complainData=i.data,o.detail=o.complainData.complain_info,o.$refs.loadingCover&&o.$refs.loadingCover.hide()):(o.$util.showToast({title:"未获取到该订单项退款信息"}),setTimeout((function(){o.$util.redirectTo("/pages/order/list/list")}),1e3))},fail:function(i){o.$refs.loadingCover&&o.$refs.loadingCover.hide()}})},submit:function(){var o=this;if(this.verify()){if(this.isSub)return;this.isSub=!0,this.$api.sendRequest({url:"/api/ordercomplain/complain",data:{order_goods_id:this.order_goods_id,complain_reason:this.complain_reason,complain_remark:this.complain_remark},success:function(i){o.$util.showToast({title:i.message}),i.code>=0?(o.getComplainData(),o.$forceUpdate()):o.isSub=!1},fail:function(i){o.isSub=!1}})}},verify:function(){return""!=this.complain_reason||(this.$util.showToast({title:"请选择退款原因"}),!1)},changeReason:function(o){this.complain_reason=o},switchAction:function(o){this.action=o},refundAction:function(i){var n=this;switch(i){case"complainCancel":o.showModal({content:"是否撤销本次维权?",cancelText:"暂不撤销",cancelColor:"#898989",success:function(o){o.confirm&&n.$api.sendRequest({url:"/api/ordercomplain/cancel",data:{order_goods_id:n.order_goods_id},success:function(o){o.code>=0&&(n.$util.showToast({title:"撤销成功"}),setTimeout((function(){n.$util.redirectTo("/pages/order/list/list")}),1e3))}})}});break;case"complainApply":this.action="apply";break}},change:function(o){o&&(this.showText=o.show)},refundDetail:function(o){this.$util.redirectTo("/pages/goods/detail/detail",{sku_id:o})}}};i.default=l}).call(this,n("543d")["default"])},caab:function(o,i,n){"use strict";var t=n("eeb6"),a=n.n(t);a.a},cbaa:function(o,i,n){"use strict";n.d(i,"b",(function(){return a})),n.d(i,"c",(function(){return e})),n.d(i,"a",(function(){return t}));var t={uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"fa04"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"a197"))}},a=function(){var o=this,i=o.$createElement,n=(o._self._c,o.complainData.complain_info&&"apply"!=o.action?null:o.$util.img(o.complainData.order_goods_info.sku_image,{size:"mid"})),t=o.complainData.complain_info&&"apply"!=o.action?null:o.$lang("common.currencySymbol"),a=o.complainData.complain_info&&"apply"!=o.action?null:o.$lang("common.submit"),e=o.complainData.complain_info&&"apply"!=o.action?o.$util.img(o.detail.sku_image,{size:"mid"}):null,l=o.complainData.complain_info&&"apply"!=o.action?o.$lang("common.currencySymbol"):null,c=o.complainData.complain_info&&"apply"!=o.action?o.$lang("common.currencySymbol"):null,u=o.complainData.complain_info&&"apply"!=o.action?o.$util.timeStampTurnTime(o.detail.complain_apply_time):null,r=o.complainData.complain_info&&"apply"!=o.action&&o.detail.complain_time?o.$util.timeStampTurnTime(o.detail.complain_time):null,s=o.complainData.complain_info&&"apply"!=o.action?o.__map(o.detail.refund_log_list,(function(i,n){var t=o.__get_orig(i),a=o.$util.timeStampTurnTime(i.action_time);return{$orig:t,g4:a}})):null;o._isMounted||(o.e0=function(i){o.complainData.order_goods_info.sku_image=o.$util.getDefaultImage().default_goods_img},o.e1=function(i){o.detail.sku_image=o.$util.getDefaultImage().default_goods_img}),o.$mp.data=Object.assign({},{$root:{g0:n,m0:t,m1:a,g1:e,m2:l,m3:c,g2:u,g3:r,l0:s}})},e=[]},d114:function(o,i,n){"use strict";n.r(i);var t=n("cbaa"),a=n("563d");for(var e in a)"default"!==e&&function(o){n.d(i,o,(function(){return a[o]}))}(e);n("6720"),n("caab");var l,c=n("f0c5"),u=Object(c["a"])(a["default"],t["b"],t["c"],!1,null,"f7f6bdc0",null,!1,t["a"],l);i["default"]=u.exports},ecdf:function(o,i,n){},eeb6:function(o,i,n){}},[["8b60","common/runtime","common/vendor"]]]);