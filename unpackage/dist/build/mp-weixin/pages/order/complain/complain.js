(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/complain/complain"],{"01dd":function(o,i,n){"use strict";(function(o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t=e(n("faec"));function e(o){return o&&o.__esModule?o:{default:o}}var a=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("b9d3"))}.bind(null,n)).catch(n.oe)},c={components:{uniPopup:a},data:function(){return{complainData:{order_goods_info:{sku_image:"",sku_name:""}},detail:{sku_image:""},complain_reason:"",complain_remark:"",action:"",showText:!1}},mixins:[t.default],onLoad:function(o){o.order_goods_id&&(this.order_goods_id=o.order_goods_id)},onShow:function(){this.$langConfig.refresh(),o.getStorageSync("token")?this.getComplainData():this.$util.redirectTo("/pages/login/login/login",{back:"/pages/order/complain/complain?order_goods_id="+this.order_goods_id})},computed:{good_image:function(){return this.complainData.order_goods_info.sku_image?this.$util.img(this.complainData.order_goods_info.sku_image,{size:"mid"}):this.$util.getDefaultImage().default_goods_img}},methods:{goConnect:function(){var i=this;if(o.getStorageSync("token")){var n={site_id:i.shopInfo.site_id,sku_id:i.goodsSkuDetail.sku_id};i.$util.redirectTo("/otherpages/chat/room/room",n)}else i.$util.redirectTo("/pages/login/login/login")},openPopup:function(o){this.$refs[o].open()},closePopup:function(o){this.$refs[o].close()},textBlur:function(){o.pageScrollTo({scrollTop:0,duration:0})},getComplainData:function(){var o=this;this.$api.sendRequest({url:"/api/ordercomplain/detail",data:{order_goods_id:this.order_goods_id},success:function(i){i.code>=0?(o.complainData=i.data,o.detail=o.complainData.complain_info,o.$refs.loadingCover&&o.$refs.loadingCover.hide()):(o.$util.showToast({title:"未获取到该订单项退款信息"}),setTimeout((function(){o.$util.redirectTo("/pages/order/list/list")}),1e3))},fail:function(i){o.$refs.loadingCover&&o.$refs.loadingCover.hide()}})},submit:function(){var o=this;if(this.verify()){if(this.isSub)return;this.isSub=!0,this.$api.sendRequest({url:"/api/ordercomplain/complain",data:{order_goods_id:this.order_goods_id,complain_reason:this.complain_reason,complain_remark:this.complain_remark},success:function(i){o.$util.showToast({title:i.message}),i.code>=0?(o.getComplainData(),o.$forceUpdate()):o.isSub=!1},fail:function(i){o.isSub=!1}})}},verify:function(){return""!=this.complain_reason||(this.$util.showToast({title:"请选择退款原因"}),!1)},changeReason:function(o){this.complain_reason=o},switchAction:function(o){this.action=o},refundAction:function(i){var n=this;switch(i){case"complainCancel":o.showModal({content:"是否撤销本次维权?",cancelText:"暂不撤销",cancelColor:"#898989",success:function(o){o.confirm&&n.$api.sendRequest({url:"/api/ordercomplain/cancel",data:{order_goods_id:n.order_goods_id},success:function(o){o.code>=0&&(n.$util.showToast({title:"撤销成功"}),setTimeout((function(){n.$util.redirectTo("/pages/order/list/list")}),1e3))}})}});break;case"complainApply":this.action="apply";break}},change:function(o){o&&(this.showText=o.show)},refundDetail:function(o){this.$util.redirectTo("/pages/goods/detail/detail",{sku_id:o})}}};i.default=c}).call(this,n("543d")["default"])},"1d51":function(o,i,n){},"26b9":function(o,i,n){"use strict";n.d(i,"b",(function(){return e})),n.d(i,"c",(function(){return a})),n.d(i,"a",(function(){return t}));var t={uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"b9d3"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"f410"))}},e=function(){var o=this,i=o.$createElement,n=(o._self._c,o.complainData.complain_info&&"apply"!=o.action?null:o.$util.img(o.complainData.order_goods_info.sku_image,{size:"mid"})),t=o.complainData.complain_info&&"apply"!=o.action?null:o.$lang("common.currencySymbol"),e=o.complainData.complain_info&&"apply"!=o.action?null:o.$lang("common.submit"),a=o.complainData.complain_info&&"apply"!=o.action?o.$util.img(o.detail.sku_image,{size:"mid"}):null,c=o.complainData.complain_info&&"apply"!=o.action?o.$lang("common.currencySymbol"):null,l=o.complainData.complain_info&&"apply"!=o.action?o.$lang("common.currencySymbol"):null,u=o.complainData.complain_info&&"apply"!=o.action?o.$util.timeStampTurnTime(o.detail.complain_apply_time):null,r=o.complainData.complain_info&&"apply"!=o.action&&o.detail.complain_time?o.$util.timeStampTurnTime(o.detail.complain_time):null,s=o.complainData.complain_info&&"apply"!=o.action?o.__map(o.detail.refund_log_list,(function(i,n){var t=o.__get_orig(i),e=o.$util.timeStampTurnTime(i.action_time);return{$orig:t,g4:e}})):null;o._isMounted||(o.e0=function(i){o.complainData.order_goods_info.sku_image=o.$util.getDefaultImage().default_goods_img},o.e1=function(i){o.detail.sku_image=o.$util.getDefaultImage().default_goods_img}),o.$mp.data=Object.assign({},{$root:{g0:n,m0:t,m1:e,g1:a,m2:c,m3:l,g2:u,g3:r,l0:s}})},a=[]},"3cff":function(o,i,n){},"5c83":function(o,i,n){"use strict";(function(o){n("c5b8");t(n("66fd"));var i=t(n("74cb"));function t(o){return o&&o.__esModule?o:{default:o}}o(i.default)}).call(this,n("543d")["createPage"])},"74cb":function(o,i,n){"use strict";n.r(i);var t=n("26b9"),e=n("98ba");for(var a in e)"default"!==a&&function(o){n.d(i,o,(function(){return e[o]}))}(a);n("ffed"),n("f21e");var c,l=n("f0c5"),u=Object(l["a"])(e["default"],t["b"],t["c"],!1,null,"f7f6bdc0",null,!1,t["a"],c);i["default"]=u.exports},"98ba":function(o,i,n){"use strict";n.r(i);var t=n("01dd"),e=n.n(t);for(var a in t)"default"!==a&&function(o){n.d(i,o,(function(){return t[o]}))}(a);i["default"]=e.a},f21e:function(o,i,n){"use strict";var t=n("1d51"),e=n.n(t);e.a},ffed:function(o,i,n){"use strict";var t=n("3cff"),e=n.n(t);e.a}},[["5c83","common/runtime","common/vendor"]]]);