(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/photo/photo"],{"332a":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var o={diyBottomNav:function(){return n.e("components/diy-bottom-nav/diy-bottom-nav").then(n.bind(null,"8c8e"))},nsLogin:function(){return Promise.all([n.e("common/vendor"),n.e("components/ns-login/ns-login")]).then(n.bind(null,"b96a"))}},i=function(){var t=this,e=t.$createElement;t._self._c},r=[]},5900:function(t,e,n){"use strict";(function(t){n("f871");o(n("66fd"));var e=o(n("ec27"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"7ca4":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("a34a")),i=r(n("2009"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return l(t)||u(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function f(t,e,n,o,i,r,a){try{var s=t[r](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(o,i)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){f(r,o,i,a,s,"next",t)}function s(t){f(r,o,i,a,s,"throw",t)}a(void 0)}))}}var g={data:function(){return{addressInfo:{},is_virtual:-1,remark:"",imgList:[],fileList:[],orderCreateData:"",token:t.getStorageSync("token")}},onShow:function(){this.getAddressInfomation()},methods:{getAddressInfomation:function(){var t=this;this.$api.sendRequest({url:"/api/memberaddress/defaultInfo",success:function(e){if(console.log(e,"数据"),t.is_virtual=e.code,e.code>=0){var n=e.data,o=n.name,i=n.mobile,r=n.full_address,a=n.address,s=n.city_id,c=n.id;t.addressInfo={name:o,mobile:i,full_address:r,address:a,city_id:s,id:c},console.log(t.addressInfo,"info")}}})},createOrder:function(){var e=this;return m(o.default.mark((function n(){var i,r,a,s;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.addressInfo,r=i.id,a=i.city_id,r){n.next=3;break}return n.abrupt("return",t.showToast({title:"请选择地址",icon:"none"}));case 3:if(0!=e.fileList.length){n.next=5;break}return n.abrupt("return",t.showToast({title:"请上传图片",icon:"none"}));case 5:s={address_id:r,city_id:a,remarks:e.remark,images:[]},e.fileList.length>0&&(t.showLoading({title:"正在上传图片",mask:!0}),console.log(e.fileList,"文件列表"),s.images=e.imgList,t.hideLoading()),t.showLoading({title:"正在提交订单",mask:!0}),e.$api.sendRequest({url:"/api/ordercreate/createPhotoOrder",data:s,success:function(n){t.hideLoading(),t.showToast({title:n.message,icon:"none"}),setTimeout((function(){e.$util.redirectTo("/pages/photo/tips")}),2e3)},fail:function(e){t.hideLoading(),t.showToast({title:"下单失败，请联系管理员",icon:"none"})}}),console.log("下单提交",s);case 10:case"end":return n.stop()}}),n)})))()},selectAddress:function(){if(""===this.token)return this.$refs.login.open();var t={back:"/pages/photo/photo",local:0,type:1};this.$util.redirectTo("/otherpages/member/address/address",t)},upload:function(e){return console.log(e,"上传的东西"),new Promise((function(n,o){t.uploadFile({url:i.default.baseUrl+"/api/upload/headimg",file:e,fileType:"image",success:function(t){200!=t.statusCode&&o(t.errMsg),n(JSON.parse(t.data))},fail:function(t){console.log(t,"上传图片有问题"),o(t)}})}))},addimg:function(){var t=this;console.log("现在：",this.imgList.length,"还可以选：",9-t.imgList.length),t.$util.upload(9-t.imgList.length,{path:"headimg"},(function(e){t.imgList=[].concat(a(t.imgList),a(e)),t.fileList=[].concat(a(t.fileList),a(e)),console.log(e,"选择的图片")}))},remove:function(e){var n=this;t.showModal({title:"提示：",content:"确定删除吗？",success:function(t){t.confirm&&(n.imgList.splice(e,1),n.fileList.splice(e,1))}})}}};e.default=g}).call(this,n("543d")["default"])},"8dbd":function(t,e,n){},"90cb":function(t,e,n){"use strict";var o=n("8dbd"),i=n.n(o);i.a},ec27:function(t,e,n){"use strict";n.r(e);var o=n("332a"),i=n("fd1a");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("90cb");var a,s=n("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=c.exports},fd1a:function(t,e,n){"use strict";n.r(e);var o=n("7ca4"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a}},[["5900","common/runtime","common/vendor"]]]);