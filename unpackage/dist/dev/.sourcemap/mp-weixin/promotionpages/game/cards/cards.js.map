{"version":3,"sources":["uni-app:///main.js","webpack:////Users/longchu/Documents/镜惠购/promotionpages/game/cards/cards.vue?f8ca","webpack:////Users/longchu/Documents/镜惠购/promotionpages/game/cards/cards.vue?f8a6","webpack:////Users/longchu/Documents/镜惠购/promotionpages/game/cards/cards.vue?db2e","webpack:////Users/longchu/Documents/镜惠购/promotionpages/game/cards/cards.vue?39e3","uni-app:///promotionpages/game/cards/cards.vue","webpack:////Users/longchu/Documents/镜惠购/promotionpages/game/cards/cards.vue?29ea","webpack:////Users/longchu/Documents/镜惠购/promotionpages/game/cards/cards.vue?8fd0","webpack:////Users/longchu/Documents/镜惠购/promotionpages/game/cards/cards.vue?a98a","webpack:////Users/longchu/Documents/镜惠购/promotionpages/game/cards/cards.vue?4826"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2G,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACc;AACuB;;;AAGzF;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+LAEN;AACP,KAAK;AACL;AACA,aAAa,uNAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1EA;AAAA;AAAA;AAAA;AAAm0B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqGv1B,wG;;AAEA;AACA;AACA,sBADA;AAEA,gBAFA,EADA;;AAKA,MALA,kBAKA;AACA;AACA,mBADA;AAEA,eAFA;AAGA,aAHA;AAIA,aAJA;AAKA,mBALA;AAMA,qBANA;AAOA,WAPA;AAQA;AACA;AACA,2BAFA;AAGA,sBAHA,EARA;;AAaA;AACA;AACA,qBAFA,EAbA;;AAiBA,oBAjBA;AAkBA,cAlBA;AAmBA,oBAnBA;AAoBA,uBApBA;AAqBA,eArBA;AAsBA,eAtBA;AAuBA,qBAvBA;;AAyBA,GA/BA;AAgCA,iCAhCA;AAiCA,QAjCA,kBAiCA,MAjCA,EAiCA;AACA;AACA;AACA;AACA,GArCA;AAsCA,QAtCA,oBAsCA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,oBAFA;;AAIA;AACA;AACA,SAFA,EAEA,IAFA;AAGA,OARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA,KAfA;AAgBA,GAzDA;AA0DA;AACA,cADA,wBACA;AACA;AACA,KAHA,EA1DA;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAPA,EA/DA;;AAwEA;AACA,oBADA,4BACA,EADA,EACA;AACA;AACA,cADA;;AAGA,KALA;AAMA,aANA,qBAMA,CANA,EAMA;AACA;AACA,KARA;AASA,sBATA,gCASA;AACA;AACA,sCADA;AAEA;AACA,+BADA,EAFA;;AAKA;AACA;AACA;AACA;AACA,SATA;;AAWA,KArBA;AAsBA,aAtBA,uBAsBA;AACA;AACA;AACA;AACA;AACA;AACA,KA5BA;AA6BA,aA7BA,qBA6BA,KA7BA,EA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtCA;AAuCA;AACA,WAxCA,qBAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BADA;;AAGA;AACA;AACA;AACA;AACA,uBADA;;AAGA;AACA;AACA;AACA;AACA;AACA,uCADA;AAEA;AACA,qBADA;AAEA,8BAFA,EAFA;;AAMA;AACA;AACA;AACA;;;AAGA;AACA;AACA,kBADA,CACA,aADA;AAEA,8BAFA,CAEA;AACA;AACA;AACA;AACA;AACA,aAPA;AAQA,gBARA;;;AAWA;AACA;AACA;AACA,WApBA,MAoBA;AACA;AACA,gCADA;;AAGA;AACA,SAhCA;;AAkCA,KA9FA;AA+FA,eA/FA,yBA+FA;AACA;AACA,oCADA;AAEA;AACA,8BADA;AAEA,qBAFA,EAFA;;AAMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAPA,MAOA;AACA;AACA,gCADA;;AAGA;AACA;AACA,aAFA,EAEA,IAFA;AAGA;AACA,SAtBA;AAuBA;AACA;AACA,8BADA;;AAGA;AACA;AACA,WAFA,EAEA,IAFA;AAGA,SA9BA;;AAgCA,KAhIA;AAiIA,iBAjIA,2BAiIA;AACA;AACA,KAnIA;AAoIA,kBApIA,4BAoIA;AACA;AACA,KAtIA;AAuIA,gBAvIA,0BAuIA;AACA;AACA;AACA,yEADA,CACA;AACA;AACA;AACA,OAJA,EAIA,IAJA;AAKA,KA9IA;AA+IA,WA/IA,qBA+IA;AACA;AACA;AACA,qBADA;AAEA,iBAFA;AAGA,eAHA;AAIA,eAJA;AAKA,qBALA;AAMA,uBANA;AAOA;AACA;AACA,6BAFA;AAGA,wBAHA,EAPA;;AAYA;AACA;AACA,uBAFA,EAZA;;AAgBA,sBAhBA;AAiBA,gBAjBA;AAkBA,sBAlBA;AAmBA,yBAnBA;;AAqBA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAaA,KAvLA,EAxEA;;AAiQA,SAjQA,qBAiQA;;;;;;;;;;;;;AAaA,GA9QA;AA+QA;AACA,SADA,iBACA,GADA,EACA;AACA;AACA,KAHA,EA/QA;;AAoRA,QApRA,oBAoRA;AACA;AACA,GAtRA,E;;;;;;;;;;;;;ACvGA;AAAA;AAAA;AAAA;AAAkiD,CAAgB,k6CAAG,EAAC,C;;;;;;;;;;;ACAtjD;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAwsC,CAAgB,wnCAAG,EAAC,C;;;;;;;;;;;ACA5tC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"promotionpages/game/cards/cards.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './promotionpages/game/cards/cards.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cards.vue?vue&type=template&id=9a12256c&scoped=true&\"\nvar renderjs\nimport script from \"./cards.vue?vue&type=script&lang=js&\"\nexport * from \"./cards.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cards.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./cards.vue?vue&type=style&index=1&id=9a12256c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9a12256c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"promotionpages/game/cards/cards.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cards.vue?vue&type=template&id=9a12256c&scoped=true&\"","var components\ntry {\n  components = {\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    loadingCover: function() {\n      return import(\n        /* webpackChunkName: \"components/loading-cover/loading-cover\" */ \"@/components/loading-cover/loading-cover.vue\"\n      )\n    },\n    nsLogin: function() {\n      return import(\n        /* webpackChunkName: \"components/ns-login/ns-login\" */ \"@/components/ns-login/ns-login.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.$util.img(\"upload/uniapp/game/cards_head.png\")\n  var g1 = _vm.$util.img(\"upload/uniapp/game/cards_bg.png\")\n  var l0 =\n    _vm.gameInfo.is_show_winner && _vm.gameInfo.draw_record.length\n      ? _vm.__map(_vm.gameInfo.draw_record, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var f0 = _vm._f(\"cover\")(item.member_nick_name)\n\n          return {\n            $orig: $orig,\n            f0: f0\n          }\n        })\n      : null\n  var g2 = _vm.$util.img(\"upload/uniapp/game/rule_head.png\")\n  var g3 = _vm.$util.timeStampTurnTime(_vm.gameInfo.start_time)\n  var g4 = _vm.$util.timeStampTurnTime(_vm.gameInfo.end_time)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n        g2: g2,\n        g3: g3,\n        g4: g4\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cards.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cards.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\" :data-theme=\"themeStyle\">\r\n\t\t<view>\r\n\t\t\t<view class=\"head-wrap\">\r\n\t\t\t\t<image :src=\"$util.img('upload/uniapp/game/cards_head.png')\" mode=\"widthFix\"></image>\r\n\t\t\t\t<view class=\"rule-mark\" @click=\"openRulePopup\">规则</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 刮卡区域 -->\r\n\t\t\t<view class=\"prize-area\">\r\n\t\t\t\t<view class=\"content-wrap\">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<view class=\"guide-wrap\" v-if=\"showGuide\">\r\n\t\t\t\t\t\t\t<block v-if=\"gameInfo.status == 1\">\r\n\t\t\t\t\t\t\t\t<view class=\"text\">刮开试试手气</view>\r\n\t\t\t\t\t\t\t\t<view class=\"btn color-base-bg\" :class=\"{ disabled: gameInfo.surplus_num == 0 }\" @click=\"lottery\">\r\n\t\t\t\t\t\t\t\t\t点我刮奖{{ '(' + gameInfo.points + '积分)' }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t<block v-else-if=\"gameInfo.status == 0\"><view class=\"text\">活动尚未开始</view></block>\r\n\t\t\t\t\t\t\t<block v-else><view class=\"text\">活动已经结束</view></block>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- #ifdef MP -->\r\n\t\t\t\t\t\t<view class=\"canvas-shade\" v-if=\"showGuide\"></view>\r\n\t\t\t\t\t\t<canvas :disable-scroll=\"true\" class=\"canvas\" canvas-id=\"cardsCanvas\" id=\"canvas\" @touchmove=\"touchMove\" v-show=\"!showGuide && !popState\"></canvas>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\r\n\t\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t\t<canvas :disable-scroll=\"true\" class=\"canvas\" canvas-id=\"cardsCanvas\" id=\"canvas\" @touchmove=\"touchMove\"></canvas>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t<view class=\"result-wrap\">\r\n\t\t\t\t\t\t\t<block v-if=\"result.is_winning\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">恭喜您中奖了</view>\r\n\t\t\t\t\t\t\t\t<view class=\"text color-base-text\">{{ result.award_name }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"tips\">可到“我的中奖记录”中查看</view>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t<block v-else>\r\n\t\t\t\t\t\t\t\t<view class=\"text color-base-text\">{{ gameInfo.no_winning_desc }}</view>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<image :src=\"$util.img('upload/uniapp/game/cards_bg.png')\" mode=\"widthFix\"></image>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 操作 -->\r\n\t\t\t<view class=\"action-text\">\r\n\t\t\t\t<view class=\"point\">我的积分：{{ point }}</view>\r\n\t\t\t\t<view class=\"record\" @click=\"redirectToRecord(id)\">我的中奖记录</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 中奖名单 -->\r\n\t\t\t<view class=\"record-wrap\" v-if=\"gameInfo.is_show_winner && gameInfo.draw_record.length\">\r\n\t\t\t\t<view class=\"body-shade\"></view>\r\n\t\t\t\t<view class=\"head\">中奖名单</view>\r\n\t\t\t\t<view class=\"body\">\r\n\t\t\t\t\t<view class=\"wrap\" :class=\"{ animate: animate }\">\r\n\t\t\t\t\t\t<view v-for=\"(item, index) in gameInfo.draw_record\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"tit\">{{ item.member_nick_name | cover }}</view>\r\n\t\t\t\t\t\t\t<view class=\"txt\">\r\n\t\t\t\t\t\t\t\t<l-time :text=\"item.create_time * 1000\"></l-time>\r\n\t\t\t\t\t\t\t\t获得 {{ item.award_name }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 活动规则 -->\r\n\t\t<uni-popup ref=\"rulePopup\" type=\"center\" :maskClick=\"false\" @change=\"popChange\">\r\n\t\t\t<view class=\"rule-wrap\">\r\n\t\t\t\t<view class=\"content-wrap\">\r\n\t\t\t\t\t<image :src=\"$util.img('upload/uniapp/game/rule_head.png')\" mode=\"widthFix\" class=\"rule-head\"></image>\r\n\t\t\t\t\t<scroll-view scroll-y=\"true\" class=\"rule\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<view class=\"tit\">活动时间</view>\r\n\t\t\t\t\t\t\t<view class=\"text\">{{ $util.timeStampTurnTime(gameInfo.start_time) }} - {{ $util.timeStampTurnTime(gameInfo.end_time) }}</view>\r\n\t\t\t\t\t\t\t<view class=\"tit\">参与规则</view>\r\n\t\t\t\t\t\t\t<view class=\"text\" v-if=\"gameInfo.join_type == 0\">每个用户活动期间共有{{ gameInfo.join_frequency }}次抽奖机会。</view>\r\n\t\t\t\t\t\t\t<view class=\"text\" v-else>每个用户活动期间每天都有{{ gameInfo.join_frequency }}次抽奖机会，每天0点更新。</view>\r\n\t\t\t\t\t\t\t<view class=\"text\">每次抽奖需消耗 {{ gameInfo.points }} 积分</view>\r\n\t\t\t\t\t\t\t<view class=\"text\" v-if=\"gameInfo.level_id != 0\">该活动只有{{ gameInfo.level_name }}等级的会员可参与。</view>\r\n\t\t\t\t\t\t\t<block v-if=\"gameInfo.remark != ''\">\r\n\t\t\t\t\t\t\t\t<view class=\"tit\">活动说明</view>\r\n\t\t\t\t\t\t\t\t<view class=\"text\">{{ gameInfo.remark }}</view>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t<text class=\"iconfont iconroundclose\" @click=\"closeRulePopup\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\t\t<loading-cover ref=\"loadingCover\"></loading-cover>\r\n\r\n\t\t<ns-login ref=\"login\"></ns-login>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport uniPopup from '@/components/uni-popup/uni-popup.vue';\r\nimport LTime from '@/promotionpages/components/l-time/l-time.vue';\r\nimport globalConfig from '@/common/js/golbalConfig.js';\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tuniPopup,\r\n\t\tLTime\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tctxData: null,\r\n\t\t\tctx: null,\r\n\t\t\tctxW: 0,\r\n\t\t\tctxH: 0,\r\n\t\t\tscaleRatio: 1,\r\n\t\t\tshowGuide: true,\r\n\t\t\tid: 0,\r\n\t\t\tgameInfo: {\r\n\t\t\t\t// 游戏数据\r\n\t\t\t\tno_winning_desc: '',\r\n\t\t\t\tsurplus_num: 0\r\n\t\t\t},\r\n\t\t\tresult: {\r\n\t\t\t\t// 抽奖结果\r\n\t\t\t\tis_winning: 0\r\n\t\t\t},\r\n\t\t\tisClick: false,\r\n\t\t\tpoint: 0,\r\n\t\t\tanimate: false,\r\n\t\t\tscrollTimer: null,\r\n\t\t\tsiteId: 0,\r\n\t\t\ttoken: '',\r\n\t\t\tpopState: false\r\n\t\t};\r\n\t},\r\n\tmixins: [globalConfig],\r\n\tonLoad(option) {\r\n\t\tif (option.id) this.id = option.id;\r\n\t\tif (option.site_id) this.siteId = option.site_id;\r\n\t\tthis.getGameInfo();\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\t\tthis.$store.dispatch('getAddonIsexit').then(data => {\r\n\t\t\tif (!data.cards) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '刮刮乐未开启',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'redirectTo');\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.token = uni.getStorageSync('token');\r\n\t\t\t\t\tthis.getMemberPointInfo();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tcomputed: {\r\n\t\tstoreToken() {\r\n\t\t\treturn this.$store.state.token;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tstoreToken: function(nVal, oVal) {\r\n\t\t\tif (nVal) {\r\n\t\t\t\tthis.token = uni.getStorageSync('token');\r\n\t\t\t\tthis.getMemberPointInfo();\r\n\t\t\t\tthis.getGameInfo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tredirectToRecord(id) {\r\n\t\t\tthis.$util.redirectTo('/promotionpages/game/record/record', {\r\n\t\t\t\tid: id\r\n\t\t\t});\r\n\t\t},\r\n\t\tpopChange(e) {\r\n\t\t\tthis.popState = e.show;\r\n\t\t},\r\n\t\tgetMemberPointInfo() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/memberaccount/info',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\taccount_type: 'point'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\tthis.point = parseInt(res.data.point);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcreateCtx() {\r\n\t\t\tthis.ctx = uni.createCanvasContext('cardsCanvas', this);\r\n\t\t\tthis.ctx.setFillStyle('#e5e5e5');\r\n\t\t\tthis.ctx.fillRect(0, 0, this.ctxW, this.ctxH);\r\n\t\t\tthis.ctx.globalCompositeOperation = 'destination-out';\r\n\t\t\tthis.ctx.draw();\r\n\t\t},\r\n\t\ttouchMove(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tvar canvasRect = this.ctxData;\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.arc(event.touches[0].x, event.touches[0].y, 10 * this.scaleRatio, 0, Math.PI * 2);\r\n\t\t\tthis.ctx.globalCompositeOperation = 'destination-out';\r\n\t\t\tthis.ctx.setFillStyle('#fff');\r\n\t\t\tthis.ctx.fill();\r\n\t\t\tthis.ctx.draw(true);\r\n\t\t},\r\n\t\t// 抽奖\r\n\t\tlottery() {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/game/cards/cards?id=' + this.id + '&site_id=' + this.siteId);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.gameInfo.status != 1) return;\r\n\t\t\tif (this.gameInfo.surplus_num <= 0) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '您的抽奖次数已用完'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.gameInfo.points > 0 && this.point < this.gameInfo.points) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '积分不足'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.isClick) return;\r\n\t\t\tthis.isClick = true;\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/cards/api/cards/lottery',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tid: this.id,\r\n\t\t\t\t\tsite_id: this.siteId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.showGuide = false;\r\n\t\t\t\t\t\tthis.result = res.data;\r\n\r\n\t\t\t\t\t\t// #ifdef MP\r\n\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\t\tquery\r\n\t\t\t\t\t\t\t.select('.guide-wrap')\r\n\t\t\t\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\t\t\t\tthis.ctxData = data;\r\n\t\t\t\t\t\t\t\tthis.ctxW = data.width;\r\n\t\t\t\t\t\t\t\tthis.ctxH = data.height;\r\n\t\t\t\t\t\t\t\tthis.createCtx();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.exec();\r\n\t\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t\t// 扣除次数 积分\r\n\t\t\t\t\t\tthis.point -= this.gameInfo.points;\r\n\t\t\t\t\t\tthis.gameInfo.surplus_num -= 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetGameInfo() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/cards/api/cards/info',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsite_id: this.siteId,\r\n\t\t\t\t\tid: this.id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0 && res.data) {\r\n\t\t\t\t\t\tthis.gameInfo = res.data;\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\r\n\t\t\t\t\t\tif (this.gameInfo.is_show_winner && this.gameInfo.draw_record.length > 6) {\r\n\t\t\t\t\t\t\tthis.scrollTimer = setInterval(this.scrollRecord, 2000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到活动信息！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到活动信息！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\topenRulePopup() {\r\n\t\t\tthis.$refs.rulePopup.open();\r\n\t\t},\r\n\t\tcloseRulePopup() {\r\n\t\t\tthis.$refs.rulePopup.close();\r\n\t\t},\r\n\t\tscrollRecord() {\r\n\t\t\tthis.animate = true;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.gameInfo.draw_record.push(this.gameInfo.draw_record[0]); // 将数组的第一个元素添加到数组的\r\n\t\t\t\tthis.gameInfo.draw_record.shift();\r\n\t\t\t\tthis.animate = false;\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\t\treCards() {\r\n\t\t\tif (this.showGuide) return;\r\n\t\t\tlet data = {\r\n\t\t\t\tctxData: null,\r\n\t\t\t\tctx: null,\r\n\t\t\t\tctxW: 0,\r\n\t\t\t\tctxH: 0,\r\n\t\t\t\tscaleRatio: 1,\r\n\t\t\t\tshowGuide: true,\r\n\t\t\t\tgameInfo: {\r\n\t\t\t\t\t// 游戏数据\r\n\t\t\t\t\tno_winning_desc: '',\r\n\t\t\t\t\tsurplus_num: 0\r\n\t\t\t\t},\r\n\t\t\t\tresult: {\r\n\t\t\t\t\t// 抽奖结果\r\n\t\t\t\t\tis_winning: 0\r\n\t\t\t\t},\r\n\t\t\t\tisClick: false,\r\n\t\t\t\tpoint: 0,\r\n\t\t\t\tanimate: false,\r\n\t\t\t\tscrollTimer: null\r\n\t\t\t};\r\n\t\t\tObject.assign(this.$data, data);\r\n\t\t\tthis.getGameInfo();\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\tthis.getMemberPointInfo();\r\n\t\t\t}\r\n\t\t\t// #ifdef H5\r\n\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\tquery\r\n\t\t\t\t.select('#canvas')\r\n\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\tthis.ctxData = data;\r\n\t\t\t\t\tthis.ctxW = data.width;\r\n\t\t\t\t\tthis.ctxH = data.height;\r\n\t\t\t\t\tthis.createCtx();\r\n\t\t\t\t})\r\n\t\t\t\t.exec();\r\n\t\t\t// #endif\r\n\t\t}\r\n\t},\r\n\tonReady() {\r\n\t\t// #ifdef H5\r\n\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\tquery\r\n\t\t\t.select('#canvas')\r\n\t\t\t.boundingClientRect(data => {\r\n\t\t\t\tthis.ctxData = data;\r\n\t\t\t\tthis.ctxW = data.width;\r\n\t\t\t\tthis.ctxH = data.height;\r\n\t\t\t\tthis.createCtx();\r\n\t\t\t})\r\n\t\t\t.exec();\r\n\t\t// #endif\r\n\t},\r\n\tfilters: {\r\n\t\tcover(str) {\r\n\t\t\treturn str.substr(0, 1) + '******' + str.substr(-1);\r\n\t\t}\r\n\t},\r\n\tonHide() {\r\n\t\tclearInterval(this.scrollTimer);\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '../public/css/cards.scss';\r\n</style>\r\n<style scoped>\r\n>>> .uni-popup__wrapper.uni-custom .uni-popup__wrapper-box {\r\n\tbackground: none !important;\r\n}\r\n\r\n>>> .uni-popup__wrapper.uni-custom.center .uni-popup__wrapper-box {\r\n\toverflow: unset;\r\n}\r\n\r\n/deep/ .reward-popup .uni-popup__wrapper-box {\r\n\tbackground: none !important;\r\n\tmax-width: unset !important;\r\n\tmax-height: unset !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cards.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cards.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1651682662794\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cards.vue?vue&type=style&index=1&id=9a12256c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cards.vue?vue&type=style&index=1&id=9a12256c&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1651682647607\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}